<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorVersion="3.11.0" translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="1436">
         <a:s>library PertinentHistory version '1.0.0'</a:s>
      </a:s>
   </annotation>
   <identifier id="PertinentHistory" system="http://cancerscreeningcds.github.io/crcsm-cds" version="1.0.0"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="5:1-5:63" localIdentifier="C3F" path="http://cancerscreeningcds.github.io/crcsm-cds/CDSConnectCommonsforFHIRv401" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CDSConnectCommonsforFHIRv401</a:s>
               </a:s>
               <a:s> version '1.0.0' called C3F</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="208" locator="6:1-6:56" localIdentifier="Common" path="http://cancerscreeningcds.github.io/crcsm-cds/CSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called Common</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="209" locator="7:1-7:63" localIdentifier="CRCSMCommon" path="http://cancerscreeningcds.github.io/crcsm-cds/CRCSMCommonFunctions" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>include </a:s>
               <a:s>
                  <a:s>CRCSMCommonFunctions</a:s>
               </a:s>
               <a:s> version '1.0.0' called CRCSMCommon</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="8:1-8:54" localIdentifier="FHIRHelpers" path="http://cancerscreeningcds.github.io/crcsm-cds/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1' called FHIRHelpers</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="211" locator="9:1-9:56" localIdentifier="DataElements" path="http://cancerscreeningcds.github.io/crcsm-cds/DataElements" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="211">
               <a:s>include </a:s>
               <a:s>
                  <a:s>DataElements</a:s>
               </a:s>
               <a:s> version '1.0.0' called DataElements</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="212" locator="10:1-10:36" localIdentifier="ScreeningDue" path="http://cancerscreeningcds.github.io/crcsm-cds/ScreeningDue" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="212">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ScreeningDue</a:s>
               </a:s>
               <a:s> version '1.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="213" locator="11:1-11:43" localIdentifier="ScreeningIncomplete" path="http://cancerscreeningcds.github.io/crcsm-cds/ScreeningIncomplete" version="1.0.0">
         <annotation xsi:type="a:Annotation">
            <a:s r="213">
               <a:s>include </a:s>
               <a:s>
                  <a:s>ScreeningIncomplete</a:s>
               </a:s>
               <a:s> version '1.0.0'</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <contexts>
      <def localId="217" locator="13:1-13:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="215" locator="13:1-13:15" name="Patient" context="Patient">
         <expression localId="216" xsi:type="SingletonFrom">
            <operand localId="214" locator="13:1-13:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="226" locator="52:1-55:12" name="UsualPatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="226">
               <a:s>define UsualPatientName:
  </a:s>
               <a:s r="240">
                  <a:s>
                     <a:s r="227">
                        <a:s r="229">
                           <a:s>
                              <a:s>Patient.name</a:s>
                           </a:s>
                        </a:s>
                        <a:s> N</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="230">
                     <a:s>where </a:s>
                     <a:s r="230">
                        <a:s r="232">
                           <a:s r="231">
                              <a:s>N</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="232">
                              <a:s>use</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="233">
                           <a:s>'usual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="238">
                     <a:s>return </a:s>
                     <a:s r="239">
                        <a:s>N</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="240" locator="53:3-55:12" xsi:type="Query">
            <source localId="227" locator="53:3-53:16" alias="N">
               <expression localId="229" locator="53:3-53:14" path="name" xsi:type="Property">
                  <source localId="228" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="230" locator="54:5-54:25" xsi:type="Equal">
               <signature localId="236" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="237" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="234" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="235" name="fhir:NameUse" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="232" locator="54:11-54:15" path="use" scope="N" xsi:type="Property"/>
               </operand>
               <operand localId="233" locator="54:19-54:25" valueType="t:String" value="usual" xsi:type="Literal"/>
            </where>
            <return localId="238" locator="55:5-55:12">
               <expression localId="239" locator="55:12" name="N" xsi:type="AliasRef"/>
            </return>
         </expression>
      </def>
      <def localId="249" locator="62:1-63:39" name="FormatPatientName" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="249">
               <a:s>define function FormatPatientName(name FHIR.HumanName):
  </a:s>
               <a:s r="1640">
                  <a:s r="1640">
                     <a:s r="1633">
                        <a:s r="1625">
                           <a:s>First(</a:s>
                           <a:s r="1620">
                              <a:s r="1619">
                                 <a:s>name</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1620">
                                 <a:s>given</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="1628">
                           <a:s>' '</a:s>
                        </a:s>
                     </a:s>
                     <a:s> + </a:s>
                     <a:s r="1635">
                        <a:s r="1634">
                           <a:s>name</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1635">
                           <a:s>family</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1640" locator="63:3-63:39" xsi:type="Concatenate">
            <operand localId="1633" locator="63:3-63:25" xsi:type="Concatenate">
               <operand localId="1629" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="1630" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1625" locator="63:3-63:19" xsi:type="First">
                     <signature localId="1626" xsi:type="ListTypeSpecifier">
                        <elementType localId="1627" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="1620" locator="63:9-63:18" path="given" xsi:type="Property">
                        <source localId="1619" locator="63:9-63:12" name="name" xsi:type="OperandRef"/>
                     </source>
                  </operand>
               </operand>
               <operand localId="1628" locator="63:23-63:25" valueType="t:String" value=" " xsi:type="Literal"/>
            </operand>
            <operand localId="1636" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <signature localId="1637" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
               <operand localId="1635" locator="63:29-63:39" path="family" xsi:type="Property">
                  <source localId="1634" locator="63:29-63:32" name="name" xsi:type="OperandRef"/>
               </operand>
            </operand>
         </expression>
         <operand localId="251" name="name">
            <operandTypeSpecifier localId="250" locator="62:40-62:53" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="279" locator="57:1-60:12" name="OfficialPatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="279">
               <a:s>define OfficialPatientName:
  </a:s>
               <a:s r="293">
                  <a:s>
                     <a:s r="280">
                        <a:s r="282">
                           <a:s>
                              <a:s>Patient.name</a:s>
                           </a:s>
                        </a:s>
                        <a:s> N</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="283">
                     <a:s>where </a:s>
                     <a:s r="283">
                        <a:s r="285">
                           <a:s r="284">
                              <a:s>N</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="285">
                              <a:s>use</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="286">
                           <a:s>'official'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="291">
                     <a:s>return </a:s>
                     <a:s r="292">
                        <a:s>N</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="293" locator="58:3-60:12" xsi:type="Query">
            <source localId="280" locator="58:3-58:16" alias="N">
               <expression localId="282" locator="58:3-58:14" path="name" xsi:type="Property">
                  <source localId="281" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="283" locator="59:5-59:28" xsi:type="Equal">
               <signature localId="289" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="290" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="287" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="288" name="fhir:NameUse" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="285" locator="59:11-59:15" path="use" scope="N" xsi:type="Property"/>
               </operand>
               <operand localId="286" locator="59:19-59:28" valueType="t:String" value="official" xsi:type="Literal"/>
            </where>
            <return localId="291" locator="60:5-60:12">
               <expression localId="292" locator="60:12" name="N" xsi:type="AliasRef"/>
            </return>
         </expression>
      </def>
      <def localId="223" locator="44:1-50:42" name="PatientName" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="223">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT DEMOGRAPHICS
//------------------------------------------------------------------------------

define PatientName:
  </a:s>
               <a:s r="224">
                  <a:s>if </a:s>
                  <a:s r="244">
                     <a:s>Exists(</a:s>
                     <a:s r="241">
                        <a:s>UsualPatientName</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> then
    </a:s>
                  <a:s r="252">
                     <a:s>FormatPatientName(</a:s>
                     <a:s r="248">
                        <a:s>First(</a:s>
                        <a:s r="245">
                           <a:s>UsualPatientName</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="277">
                     <a:s>if </a:s>
                     <a:s r="297">
                        <a:s>Exists(</a:s>
                        <a:s r="294">
                           <a:s>OfficialPatientName</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="306">
                        <a:s>FormatPatientName(</a:s>
                        <a:s r="303">
                           <a:s>First(</a:s>
                           <a:s r="298">
                              <a:s>OfficialPatientName</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="316">
                        <a:s>FormatPatientName(</a:s>
                        <a:s r="313">
                           <a:s>First(</a:s>
                           <a:s r="308">
                              <a:s r="307">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="308">
                                 <a:s>name</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="224" locator="45:3-50:42" xsi:type="If">
            <condition localId="244" locator="45:6-45:29" xsi:type="Exists">
               <operand localId="241" locator="45:13-45:28" name="UsualPatientName" xsi:type="ExpressionRef"/>
            </condition>
            <then localId="252" locator="46:5-46:46" name="FormatPatientName" xsi:type="FunctionRef">
               <operand localId="248" locator="46:23-46:45" xsi:type="First">
                  <source localId="245" locator="46:29-46:44" name="UsualPatientName" xsi:type="ExpressionRef"/>
               </operand>
            </then>
            <else localId="277" locator="47:8-50:42" xsi:type="If">
               <condition localId="297" locator="47:11-47:37" xsi:type="Exists">
                  <operand localId="294" locator="47:18-47:36" name="OfficialPatientName" xsi:type="ExpressionRef"/>
               </condition>
               <then localId="306" locator="48:5-48:49" name="FormatPatientName" xsi:type="FunctionRef">
                  <operand localId="303" locator="48:23-48:48" xsi:type="First">
                     <signature localId="304" xsi:type="ListTypeSpecifier">
                        <elementType localId="305" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="298" locator="48:29-48:47" name="OfficialPatientName" xsi:type="ExpressionRef"/>
                  </operand>
               </then>
               <else localId="316" locator="50:5-50:42" name="FormatPatientName" xsi:type="FunctionRef">
                  <operand localId="313" locator="50:23-50:41" xsi:type="First">
                     <signature localId="314" xsi:type="ListTypeSpecifier">
                        <elementType localId="315" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <source localId="308" locator="50:29-50:40" path="name" xsi:type="Property">
                        <source localId="307" locator="50:29-50:35" name="Patient" xsi:type="ExpressionRef"/>
                     </source>
                  </operand>
               </else>
            </else>
         </expression>
      </def>
      <def localId="325" locator="65:1-68:16" name="BirthSexText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="325">
               <a:s>define BirthSexText:
  </a:s>
               <a:s r="326">
                  <a:s>if </a:s>
                  <a:s r="327">
                     <a:s r="329">
                        <a:s r="328">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="329">
                           <a:s>BirthSexCode</a:s>
                        </a:s>
                     </a:s>
                     <a:s> = </a:s>
                     <a:s r="330">
                        <a:s>'F'</a:s>
                     </a:s>
                  </a:s>
                  <a:s> then </a:s>
                  <a:s r="333">
                     <a:s>'Female'</a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="334">
                     <a:s>if </a:s>
                     <a:s r="335">
                        <a:s r="337">
                           <a:s r="336">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="337">
                              <a:s>BirthSexCode</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="338">
                           <a:s>'M'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="341">
                        <a:s>'Male'</a:s>
                     </a:s>
                     <a:s>
  else </a:s>
                     <a:s r="342">
                        <a:s>'Unknown'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="326" locator="66:3-68:16" xsi:type="If">
            <condition localId="327" locator="66:6-66:36" xsi:type="Equal">
               <signature localId="331" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="332" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="329" locator="66:6-66:30" name="BirthSexCode" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <operand localId="330" locator="66:34-66:36" valueType="t:String" value="F" xsi:type="Literal"/>
            </condition>
            <then localId="333" locator="66:43-66:50" valueType="t:String" value="Female" xsi:type="Literal"/>
            <else localId="334" locator="67:8-68:16" xsi:type="If">
               <condition localId="335" locator="67:11-67:41" xsi:type="Equal">
                  <signature localId="339" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="340" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="337" locator="67:11-67:35" name="BirthSexCode" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  <operand localId="338" locator="67:39-67:41" valueType="t:String" value="M" xsi:type="Literal"/>
               </condition>
               <then localId="341" locator="67:48-67:53" valueType="t:String" value="Male" xsi:type="Literal"/>
               <else localId="342" locator="68:8-68:16" valueType="t:String" value="Unknown" xsi:type="Literal"/>
            </else>
         </expression>
      </def>
      <def localId="351" locator="70:1-73:27" name="GenderText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="351">
               <a:s>define GenderText:
  </a:s>
               <a:s r="352">
                  <a:s>if </a:s>
                  <a:s r="359">
                     <a:s>Exists(</a:s>
                     <a:s r="354">
                        <a:s r="353">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="354">
                           <a:s>GenderIdentityExtension</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s> 
  then </a:s>
                  <a:s r="377">
                     <a:s r="376">
                        <a:s r="362">
                           <a:s r="371">
                              <a:s r="370">
                                 <a:s r="363">
                                    <a:s r="365">
                                       <a:s r="364">
                                          <a:s>DataElements</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="365">
                                          <a:s>GenderIdentityExtension</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="366">[0]</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="370">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="371">
                                 <a:s>coding</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="372">[0]</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="376">
                           <a:s>code</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="377">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  else </a:s>
                  <a:s r="380">
                     <a:s r="379">
                        <a:s r="378">
                           <a:s>Patient</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="379">
                           <a:s>gender</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="380">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="352" locator="71:3-73:27" xsi:type="If">
            <condition localId="359" locator="71:6-71:49" xsi:type="Exists">
               <signature localId="360" xsi:type="ListTypeSpecifier">
                  <elementType localId="361" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="354" locator="71:13-71:48" name="GenderIdentityExtension" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </condition>
            <then localId="377" locator="72:8-72:73" path="value" xsi:type="Property">
               <source localId="376" locator="72:8-72:67" path="code" xsi:type="Property">
                  <source localId="362" locator="72:8-72:62" xsi:type="Indexer">
                     <signature localId="373" xsi:type="ListTypeSpecifier">
                        <elementType localId="374" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                     </signature>
                     <signature localId="375" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="371" locator="72:8-72:59" path="coding" xsi:type="Property">
                        <source localId="370" locator="72:8-72:52" path="value" xsi:type="Property">
                           <source localId="363" locator="72:8-72:46" xsi:type="Indexer">
                              <signature localId="367" xsi:type="ListTypeSpecifier">
                                 <elementType localId="368" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="369" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="365" locator="72:8-72:43" name="GenderIdentityExtension" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="366" locator="72:45" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </operand>
                     <operand localId="372" locator="72:61" valueType="t:Integer" value="0" xsi:type="Literal"/>
                  </source>
               </source>
            </then>
            <else localId="380" locator="73:8-73:27" path="value" xsi:type="Property">
               <source localId="379" locator="73:8-73:21" path="gender" xsi:type="Property">
                  <source localId="378" locator="73:8-73:14" name="Patient" xsi:type="ExpressionRef"/>
               </source>
            </else>
         </expression>
      </def>
      <def localId="391" locator="89:1-90:53" name="CommunicationLanguageCode" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="391">
               <a:s>define CommunicationLanguageCode:
  </a:s>
               <a:s r="392">
                  <a:s r="430">
                     <a:s r="421">
                        <a:s r="413">
                           <a:s r="402">
                              <a:s r="394">
                                 <a:s r="393">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="394">
                                    <a:s>communication</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="402">
                                 <a:s>language</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="413">
                              <a:s>coding</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="421">
                           <a:s>code</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="430">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="432">[0]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="392" locator="90:3-90:53" xsi:type="Indexer">
            <signature localId="433" xsi:type="ListTypeSpecifier">
               <elementType localId="434" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="435" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="430" locator="90:3-90:50" xsi:type="Query">
               <source localId="429" alias="$this">
                  <expression localId="421" locator="90:3-90:44" xsi:type="Query">
                     <source localId="420" alias="$this">
                        <expression localId="413" locator="90:3-90:39" xsi:type="Flatten">
                           <operand localId="411" xsi:type="Query">
                              <source localId="410" alias="$this">
                                 <expression localId="402" locator="90:3-90:32" xsi:type="Query">
                                    <source localId="401" alias="$this">
                                       <expression localId="394" locator="90:3-90:23" path="communication" xsi:type="Property">
                                          <source localId="393" locator="90:3-90:9" name="Patient" xsi:type="ExpressionRef"/>
                                       </expression>
                                    </source>
                                    <where localId="398" xsi:type="Not">
                                       <operand localId="397" xsi:type="IsNull">
                                          <operand localId="396" path="language" xsi:type="Property">
                                             <source localId="395" name="$this" xsi:type="AliasRef"/>
                                          </operand>
                                       </operand>
                                    </where>
                                    <return localId="403" distinct="false">
                                       <expression localId="400" path="language" xsi:type="Property">
                                          <source localId="399" name="$this" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </expression>
                              </source>
                              <where localId="407" xsi:type="Not">
                                 <operand localId="406" xsi:type="IsNull">
                                    <operand localId="405" path="coding" xsi:type="Property">
                                       <source localId="404" name="$this" xsi:type="AliasRef"/>
                                    </operand>
                                 </operand>
                              </where>
                              <return localId="412" distinct="false">
                                 <expression localId="409" path="coding" xsi:type="Property">
                                    <source localId="408" name="$this" xsi:type="AliasRef"/>
                                 </expression>
                              </return>
                           </operand>
                        </expression>
                     </source>
                     <where localId="417" xsi:type="Not">
                        <operand localId="416" xsi:type="IsNull">
                           <operand localId="415" path="code" xsi:type="Property">
                              <source localId="414" name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return localId="422" distinct="false">
                        <expression localId="419" path="code" xsi:type="Property">
                           <source localId="418" name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where localId="426" xsi:type="Not">
                  <operand localId="425" xsi:type="IsNull">
                     <operand localId="424" path="value" xsi:type="Property">
                        <source localId="423" name="$this" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
               </where>
               <return localId="431" distinct="false">
                  <expression localId="428" path="value" xsi:type="Property">
                     <source localId="427" name="$this" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
            <operand localId="432" locator="90:52" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="438" locator="92:1-93:46" name="CommunicationLanguageText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="438">
               <a:s>define CommunicationLanguageText:
  </a:s>
               <a:s r="439">
                  <a:s r="467">
                     <a:s r="458">
                        <a:s r="449">
                           <a:s r="441">
                              <a:s r="440">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="441">
                                 <a:s>communication</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="449">
                              <a:s>language</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="458">
                           <a:s>text</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="467">
                        <a:s>value</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="469">[0]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="439" locator="93:3-93:46" xsi:type="Indexer">
            <signature localId="470" xsi:type="ListTypeSpecifier">
               <elementType localId="471" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <signature localId="472" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="467" locator="93:3-93:43" xsi:type="Query">
               <source localId="466" alias="$this">
                  <expression localId="458" locator="93:3-93:37" xsi:type="Query">
                     <source localId="457" alias="$this">
                        <expression localId="449" locator="93:3-93:32" xsi:type="Query">
                           <source localId="448" alias="$this">
                              <expression localId="441" locator="93:3-93:23" path="communication" xsi:type="Property">
                                 <source localId="440" locator="93:3-93:9" name="Patient" xsi:type="ExpressionRef"/>
                              </expression>
                           </source>
                           <where localId="445" xsi:type="Not">
                              <operand localId="444" xsi:type="IsNull">
                                 <operand localId="443" path="language" xsi:type="Property">
                                    <source localId="442" name="$this" xsi:type="AliasRef"/>
                                 </operand>
                              </operand>
                           </where>
                           <return localId="450" distinct="false">
                              <expression localId="447" path="language" xsi:type="Property">
                                 <source localId="446" name="$this" xsi:type="AliasRef"/>
                              </expression>
                           </return>
                        </expression>
                     </source>
                     <where localId="454" xsi:type="Not">
                        <operand localId="453" xsi:type="IsNull">
                           <operand localId="452" path="text" xsi:type="Property">
                              <source localId="451" name="$this" xsi:type="AliasRef"/>
                           </operand>
                        </operand>
                     </where>
                     <return localId="459" distinct="false">
                        <expression localId="456" path="text" xsi:type="Property">
                           <source localId="455" name="$this" xsi:type="AliasRef"/>
                        </expression>
                     </return>
                  </expression>
               </source>
               <where localId="463" xsi:type="Not">
                  <operand localId="462" xsi:type="IsNull">
                     <operand localId="461" path="value" xsi:type="Property">
                        <source localId="460" name="$this" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
               </where>
               <return localId="468" distinct="false">
                  <expression localId="465" path="value" xsi:type="Property">
                     <source localId="464" name="$this" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
            <operand localId="469" locator="93:45" valueType="t:Integer" value="0" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="475" locator="95:1-96:24" name="LanguageCode" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="475">
               <a:s>define LanguageCode:
  </a:s>
               <a:s r="478">
                  <a:s r="477">
                     <a:s r="476">
                        <a:s>Patient</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="477">
                        <a:s>language</a:s>
                     </a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="478">
                     <a:s>value</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="478" locator="96:3-96:24" path="value" xsi:type="Property">
            <source localId="477" locator="96:3-96:18" path="language" xsi:type="Property">
               <source localId="476" locator="96:3-96:9" name="Patient" xsi:type="ExpressionRef"/>
            </source>
         </expression>
      </def>
      <def localId="388" locator="86:1-87:82" name="LanguageTextAbbreviated" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="388">
               <a:s>define LanguageTextAbbreviated:
  </a:s>
               <a:s r="482">
                  <a:s>Coalesce( </a:s>
                  <a:s r="389">
                     <a:s>{</a:s>
                     <a:s r="436">
                        <a:s>CommunicationLanguageCode</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="473">
                        <a:s>CommunicationLanguageText</a:s>
                     </a:s>
                     <a:s>, </a:s>
                     <a:s r="479">
                        <a:s>LanguageCode</a:s>
                     </a:s>
                     <a:s>}</a:s>
                  </a:s>
                  <a:s> )</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="482" locator="87:3-87:82" xsi:type="Coalesce">
            <operand localId="389" locator="87:13-87:80" xsi:type="List">
               <element localId="436" locator="87:14-87:38" name="CommunicationLanguageCode" xsi:type="ExpressionRef"/>
               <element localId="473" locator="87:41-87:65" name="CommunicationLanguageText" xsi:type="ExpressionRef"/>
               <element localId="479" locator="87:68-87:79" name="LanguageCode" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="383" locator="75:1-84:5" name="LanguageText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="383">
               <a:s>define LanguageText:
  </a:s>
               <a:s r="384">
                  <a:s>case
    </a:s>
                  <a:s r="385">
                     <a:s>when </a:s>
                     <a:s r="386">
                        <a:s r="483">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="484">
                           <a:s>'en'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="487">
                        <a:s>'English'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="488">
                     <a:s>when </a:s>
                     <a:s r="489">
                        <a:s r="490">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="491">
                           <a:s>'es'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="494">
                        <a:s>'Spanish'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="495">
                     <a:s>when </a:s>
                     <a:s r="496">
                        <a:s r="497">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="498">
                           <a:s>'zh'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="501">
                        <a:s>'Chinese'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="502">
                     <a:s>when </a:s>
                     <a:s r="503">
                        <a:s r="504">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="505">
                           <a:s>'fr'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="508">
                        <a:s>'French'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="509">
                     <a:s>when </a:s>
                     <a:s r="510">
                        <a:s r="511">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="512">
                           <a:s>'tl'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="515">
                        <a:s>'Tagalog'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="516">
                     <a:s>when </a:s>
                     <a:s r="517">
                        <a:s r="518">
                           <a:s>LanguageTextAbbreviated</a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="519">
                           <a:s>'vi'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="522">
                        <a:s>'Vietnamese'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    else </a:s>
                  <a:s r="523">
                     <a:s>'Unknown'</a:s>
                  </a:s>
                  <a:s>
  end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="384" locator="76:3-84:5" xsi:type="Case">
            <caseItem localId="385" locator="77:5-77:54">
               <when localId="386" locator="77:10-77:39" xsi:type="Equal">
                  <signature localId="485" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="486" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="483" locator="77:10-77:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="484" locator="77:36-77:39" valueType="t:String" value="en" xsi:type="Literal"/>
               </when>
               <then localId="487" locator="77:46-77:54" valueType="t:String" value="English" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="488" locator="78:5-78:54">
               <when localId="489" locator="78:10-78:39" xsi:type="Equal">
                  <signature localId="492" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="493" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="490" locator="78:10-78:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="491" locator="78:36-78:39" valueType="t:String" value="es" xsi:type="Literal"/>
               </when>
               <then localId="494" locator="78:46-78:54" valueType="t:String" value="Spanish" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="495" locator="79:5-79:54">
               <when localId="496" locator="79:10-79:39" xsi:type="Equal">
                  <signature localId="499" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="500" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="497" locator="79:10-79:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="498" locator="79:36-79:39" valueType="t:String" value="zh" xsi:type="Literal"/>
               </when>
               <then localId="501" locator="79:46-79:54" valueType="t:String" value="Chinese" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="502" locator="80:5-80:53">
               <when localId="503" locator="80:10-80:39" xsi:type="Equal">
                  <signature localId="506" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="507" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="504" locator="80:10-80:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="505" locator="80:36-80:39" valueType="t:String" value="fr" xsi:type="Literal"/>
               </when>
               <then localId="508" locator="80:46-80:53" valueType="t:String" value="French" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="509" locator="81:5-81:54">
               <when localId="510" locator="81:10-81:39" xsi:type="Equal">
                  <signature localId="513" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="514" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="511" locator="81:10-81:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="512" locator="81:36-81:39" valueType="t:String" value="tl" xsi:type="Literal"/>
               </when>
               <then localId="515" locator="81:46-81:54" valueType="t:String" value="Tagalog" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="516" locator="82:5-82:57">
               <when localId="517" locator="82:10-82:39" xsi:type="Equal">
                  <signature localId="520" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="521" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="518" locator="82:10-82:32" name="LanguageTextAbbreviated" xsi:type="ExpressionRef"/>
                  <operand localId="519" locator="82:36-82:39" valueType="t:String" value="vi" xsi:type="Literal"/>
               </when>
               <then localId="522" locator="82:46-82:57" valueType="t:String" value="Vietnamese" xsi:type="Literal"/>
            </caseItem>
            <else localId="523" locator="83:10-83:18" valueType="t:String" value="Unknown" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="530" locator="101:1-104:99" name="RaceExtensionValues" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="530">
               <a:s>define RaceExtensionValues:
  </a:s>
               <a:s r="563">
                  <a:s>
                     <a:s r="531">
                        <a:s r="533">
                           <a:s>(</a:s>
                           <a:s r="533">
                              <a:s r="532">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="533">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="534">
                     <a:s>where </a:s>
                     <a:s r="534">
                        <a:s r="536">
                           <a:s r="535">
                              <a:s>E</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="536">
                              <a:s>url</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="537">
                           <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-race'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="542">
                     <a:s>return </a:s>
                     <a:s r="562">
                        <a:s>
                           <a:s r="543">
                              <a:s r="545">
                                 <a:s>(</a:s>
                                 <a:s r="545">
                                    <a:s r="544">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="545">
                                       <a:s>extension</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> X</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="546">
                           <a:s>where </a:s>
                           <a:s r="546">
                              <a:s r="548">
                                 <a:s r="547">
                                    <a:s>X</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="548">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="549">
                                 <a:s>'text'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="554">
                           <a:s>return </a:s>
                           <a:s r="560">
                              <a:s r="555">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="560">
                                 <a:s>ToString(</a:s>
                                 <a:s r="556">
                                    <a:s r="558">
                                       <a:s r="557">
                                          <a:s>X</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="558">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="559">
                                       <a:s>FHIR.string</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="563" locator="102:3-104:99" xsi:type="Query">
            <source localId="531" locator="102:3-102:23" alias="E">
               <expression localId="533" locator="102:3-102:21" path="extension" xsi:type="Property">
                  <source localId="532" locator="102:4-102:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="534" locator="103:5-103:80" xsi:type="Equal">
               <signature localId="540" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="541" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="538" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="539" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="536" locator="103:11-103:15" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="537" locator="103:19-103:80" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-race" xsi:type="Literal"/>
            </where>
            <return localId="542" locator="104:5-104:99">
               <expression localId="562" locator="104:12-104:99" xsi:type="Query">
                  <source localId="543" locator="104:12-104:26" alias="X">
                     <expression localId="545" locator="104:12-104:24" path="extension" scope="E" xsi:type="Property"/>
                  </source>
                  <where localId="546" locator="104:28-104:47" xsi:type="Equal">
                     <signature localId="552" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="553" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="550" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="551" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="548" locator="104:34-104:38" path="url" scope="X" xsi:type="Property"/>
                     </operand>
                     <operand localId="549" locator="104:42-104:47" valueType="t:String" value="text" xsi:type="Literal"/>
                  </where>
                  <return localId="554" locator="104:49-104:99">
                     <expression localId="560" locator="104:56-104:99" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="561" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="556" locator="104:77-104:98" strict="false" xsi:type="As">
                           <operand localId="558" locator="104:77-104:83" path="value" scope="X" xsi:type="Property"/>
                           <asTypeSpecifier localId="559" locator="104:88-104:98" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="528" locator="98:1-99:41" name="RaceText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="528">
               <a:s>define RaceText:
  </a:s>
               <a:s r="578">
                  <a:s>Coalesce(</a:s>
                  <a:s r="570">
                     <a:s>Coalesce(</a:s>
                     <a:s r="564">
                        <a:s>RaceExtensionValues</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="578" locator="99:3-99:41" xsi:type="Coalesce">
            <signature localId="579" xsi:type="ListTypeSpecifier">
               <elementType localId="580" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="570" locator="99:12-99:40" xsi:type="Coalesce">
               <signature localId="571" xsi:type="ListTypeSpecifier">
                  <elementType localId="572" xsi:type="ListTypeSpecifier">
                     <elementType localId="573" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </signature>
               <operand localId="564" locator="99:21-99:39" name="RaceExtensionValues" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="589" locator="109:1-112:99" name="EthnicityExtensionValues" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="589">
               <a:s>define EthnicityExtensionValues:
  </a:s>
               <a:s r="622">
                  <a:s>
                     <a:s r="590">
                        <a:s r="592">
                           <a:s>(</a:s>
                           <a:s r="592">
                              <a:s r="591">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="592">
                                 <a:s>extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="593">
                     <a:s>where </a:s>
                     <a:s r="593">
                        <a:s r="595">
                           <a:s r="594">
                              <a:s>E</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="595">
                              <a:s>url</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="596">
                           <a:s>'http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="601">
                     <a:s>return </a:s>
                     <a:s r="621">
                        <a:s>
                           <a:s r="602">
                              <a:s r="604">
                                 <a:s>(</a:s>
                                 <a:s r="604">
                                    <a:s r="603">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="604">
                                       <a:s>extension</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> X</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="605">
                           <a:s>where </a:s>
                           <a:s r="605">
                              <a:s r="607">
                                 <a:s r="606">
                                    <a:s>X</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="607">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="608">
                                 <a:s>'text'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="613">
                           <a:s>return </a:s>
                           <a:s r="619">
                              <a:s r="614">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="619">
                                 <a:s>ToString(</a:s>
                                 <a:s r="615">
                                    <a:s r="617">
                                       <a:s r="616">
                                          <a:s>X</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="617">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="618">
                                       <a:s>FHIR.string</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="622" locator="110:3-112:99" xsi:type="Query">
            <source localId="590" locator="110:3-110:23" alias="E">
               <expression localId="592" locator="110:3-110:21" path="extension" xsi:type="Property">
                  <source localId="591" locator="110:4-110:10" name="Patient" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <where localId="593" locator="111:5-111:85" xsi:type="Equal">
               <signature localId="599" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <signature localId="600" name="t:String" xsi:type="NamedTypeSpecifier"/>
               <operand localId="597" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature localId="598" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="595" locator="111:11-111:15" path="url" scope="E" xsi:type="Property"/>
               </operand>
               <operand localId="596" locator="111:19-111:85" valueType="t:String" value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity" xsi:type="Literal"/>
            </where>
            <return localId="601" locator="112:5-112:99">
               <expression localId="621" locator="112:12-112:99" xsi:type="Query">
                  <source localId="602" locator="112:12-112:26" alias="X">
                     <expression localId="604" locator="112:12-112:24" path="extension" scope="E" xsi:type="Property"/>
                  </source>
                  <where localId="605" locator="112:28-112:47" xsi:type="Equal">
                     <signature localId="611" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <signature localId="612" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="609" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="610" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="607" locator="112:34-112:38" path="url" scope="X" xsi:type="Property"/>
                     </operand>
                     <operand localId="608" locator="112:42-112:47" valueType="t:String" value="text" xsi:type="Literal"/>
                  </where>
                  <return localId="613" locator="112:49-112:99">
                     <expression localId="619" locator="112:56-112:99" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <signature localId="620" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="615" locator="112:77-112:98" strict="false" xsi:type="As">
                           <operand localId="617" locator="112:77-112:83" path="value" scope="X" xsi:type="Property"/>
                           <asTypeSpecifier localId="618" locator="112:88-112:98" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="587" locator="106:1-107:46" name="EthnicityText" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="587">
               <a:s>define EthnicityText:
  </a:s>
               <a:s r="637">
                  <a:s>Coalesce(</a:s>
                  <a:s r="629">
                     <a:s>Coalesce(</a:s>
                     <a:s r="623">
                        <a:s>EthnicityExtensionValues</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="637" locator="107:3-107:46" xsi:type="Coalesce">
            <signature localId="638" xsi:type="ListTypeSpecifier">
               <elementType localId="639" name="t:String" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="629" locator="107:12-107:45" xsi:type="Coalesce">
               <signature localId="630" xsi:type="ListTypeSpecifier">
                  <elementType localId="631" xsi:type="ListTypeSpecifier">
                     <elementType localId="632" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </signature>
               <operand localId="623" locator="107:21-107:44" name="EthnicityExtensionValues" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="649" locator="118:1-131:54" name="PertinentConditions" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="649">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT CONDITIONS
//------------------------------------------------------------------------------

define PertinentConditions:
  </a:s>
               <a:s r="692">
                  <a:s r="689">
                     <a:s r="685">
                        <a:s r="682">
                           <a:s r="678">
                              <a:s r="675">
                                 <a:s r="671">
                                    <a:s r="668">
                                       <a:s r="664">
                                          <a:s r="661">
                                             <a:s r="657">
                                                <a:s r="654">
                                                   <a:s r="651">
                                                      <a:s r="650">
                                                         <a:s>DataElements</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="651">
                                                         <a:s>ColorectalCancerDiagnoses</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> union
  </a:s>
                                                   <a:s r="653">
                                                      <a:s r="652">
                                                         <a:s>DataElements</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="653">
                                                         <a:s>ColorectalCancerConditions</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> union
  </a:s>
                                                <a:s r="656">
                                                   <a:s r="655">
                                                      <a:s>DataElements</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="656">
                                                      <a:s>LynchSyndromeConditions</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> union
  </a:s>
                                             <a:s r="659">
                                                <a:s r="658">
                                                   <a:s>DataElements</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="659">
                                                   <a:s>FamilialAdenomatousPolyposisConditions</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> union
  </a:s>
                                          <a:s r="663">
                                             <a:s r="662">
                                                <a:s>DataElements</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="663">
                                                <a:s>AttenuatedFamilialAdenomatousPolyposisConditions</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> union
  </a:s>
                                       <a:s r="666">
                                          <a:s r="665">
                                             <a:s>DataElements</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="666">
                                             <a:s>MUTYHAssociatedPolyposisConditions</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> union
  </a:s>
                                    <a:s r="670">
                                       <a:s r="669">
                                          <a:s>DataElements</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="670">
                                          <a:s>SerratedPolyposisConditions</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> union
  </a:s>
                                 <a:s r="673">
                                    <a:s r="672">
                                       <a:s>DataElements</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="673">
                                       <a:s>JuvenilePolyposisConditions</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> union
  </a:s>
                              <a:s r="677">
                                 <a:s r="676">
                                    <a:s>DataElements</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="677">
                                    <a:s>PeutzJegherSyndromeConditions</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> union
  </a:s>
                           <a:s r="680">
                              <a:s r="679">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="680">
                                 <a:s>CowdenSyndromeConditions</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> union
  </a:s>
                        <a:s r="684">
                           <a:s r="683">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="684">
                              <a:s>UlcerativeColitisConditions</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> union
  </a:s>
                     <a:s r="687">
                        <a:s r="686">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="687">
                           <a:s>CrohnsDiseaseConditions</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="691">
                     <a:s r="690">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="691">
                        <a:s>PotentiallyPrecancerousPolypsConditions</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="692" locator="119:3-131:54" xsi:type="Union">
            <operand localId="689" locator="119:3-130:38" xsi:type="Union">
               <operand localId="682" locator="119:3-128:39" xsi:type="Union">
                  <operand localId="675" locator="119:3-126:42" xsi:type="Union">
                     <operand localId="668" locator="119:3-124:49" xsi:type="Union">
                        <operand localId="661" locator="119:3-122:53" xsi:type="Union">
                           <operand localId="654" locator="119:3-120:41" xsi:type="Union">
                              <operand localId="651" locator="119:3-119:40" name="ColorectalCancerDiagnoses" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="653" locator="120:3-120:41" name="ColorectalCancerConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                           <operand localId="660" xsi:type="Union">
                              <operand localId="656" locator="121:3-121:38" name="LynchSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="659" locator="122:3-122:53" name="FamilialAdenomatousPolyposisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                        <operand localId="667" xsi:type="Union">
                           <operand localId="663" locator="123:3-123:63" name="AttenuatedFamilialAdenomatousPolyposisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           <operand localId="666" locator="124:3-124:49" name="MUTYHAssociatedPolyposisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                     <operand localId="674" xsi:type="Union">
                        <operand localId="670" locator="125:3-125:42" name="SerratedPolyposisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                        <operand localId="673" locator="126:3-126:42" name="JuvenilePolyposisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="681" xsi:type="Union">
                     <operand localId="677" locator="127:3-127:44" name="PeutzJegherSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     <operand localId="680" locator="128:3-128:39" name="CowdenSyndromeConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="688" xsi:type="Union">
                  <operand localId="684" locator="129:3-129:42" name="UlcerativeColitisConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  <operand localId="687" locator="130:3-130:38" name="CrohnsDiseaseConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="691" locator="131:3-131:54" name="PotentiallyPrecancerousPolypsConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="731" locator="318:1-322:42" name="HasBeenLocallyEdited" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="731">
               <a:s>//------------------------------------------------------------------------------
// FUNCTIONS
//------------------------------------------------------------------------------

define function HasBeenLocallyEdited(R FHIR.DomainResource):
  </a:s>
               <a:s r="1662">
                  <a:s r="1662">
                     <a:s>
                        <a:s r="1641">
                           <a:s r="1643">
                              <a:s>
                                 <a:s>R.extension</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ext</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1644">
                        <a:s>where
      </a:s>
                        <a:s r="1644">
                           <a:s r="1645">
                              <a:s r="1647">
                                 <a:s r="1646">
                                    <a:s>ext</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1647">
                                    <a:s>url</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1648">
                                 <a:s>'http://cancerscreeningcds.github.io/crcsm-cds/StructureDefinition/crcsm-edited'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="1653">
                              <a:s r="1654">
                                 <a:s r="1656">
                                    <a:s r="1655">
                                       <a:s>ext</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1656">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1657">
                                    <a:s>FHIR.boolean</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1658"> = true</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1662" locator="319:3-322:42" xsi:type="Query">
            <source localId="1641" locator="319:3-319:17" alias="ext">
               <expression localId="1643" locator="319:3-319:13" path="extension" xsi:type="Property">
                  <source localId="1642" name="R" xsi:type="OperandRef"/>
               </expression>
            </source>
            <where localId="1644" locator="320:5-322:42" xsi:type="And">
               <operand localId="1645" locator="321:7-321:96" xsi:type="Equal">
                  <signature localId="1651" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1652" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1649" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature localId="1650" name="fhir:uri" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="1647" locator="321:7-321:13" path="url" scope="ext" xsi:type="Property"/>
                  </operand>
                  <operand localId="1648" locator="321:17-321:96" valueType="t:String" value="http://cancerscreeningcds.github.io/crcsm-cds/StructureDefinition/crcsm-edited" xsi:type="Literal"/>
               </operand>
               <operand localId="1653" locator="322:11-322:42" xsi:type="Equal">
                  <signature localId="1660" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <signature localId="1661" name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="1659" name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1654" locator="322:11-322:35" strict="false" xsi:type="As">
                        <operand localId="1656" locator="322:11-322:19" path="value" scope="ext" xsi:type="Property"/>
                        <asTypeSpecifier localId="1657" locator="322:24-322:35" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand localId="1658" locator="322:39-322:42" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               </operand>
            </where>
         </expression>
         <operand localId="733" name="R">
            <operandTypeSpecifier localId="732" locator="318:40-318:58" name="fhir:DomainResource" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="646" locator="133:1-147:31" name="PertinentConditionsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="646">
               <a:s>define PertinentConditionsSummary:
  </a:s>
               <a:s r="767">
                  <a:s>
                     <a:s r="647">
                        <a:s r="693">
                           <a:s>(</a:s>
                           <a:s r="693">
                              <a:s>PertinentConditions</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="694">
                     <a:s>return </a:s>
                     <a:s r="695">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="699">
                              <a:s r="696">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="699">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="698">
                                    <a:s r="697">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="698">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="709">
                              <a:s r="708">
                                 <a:s r="700">
                                    <a:s r="703">
                                       <a:s r="702">
                                          <a:s r="701">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="702">
                                             <a:s>clinicalStatus</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="703">
                                          <a:s>coding</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="704">[0]</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="708">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="709">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="720">
                              <a:s r="710">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="720">
                                 <a:s>DateTimeText(
      </a:s>
                                 <a:s r="719">
                                    <a:s>Coalesce(
        </a:s>
                                    <a:s r="711">
                                       <a:s r="713">
                                          <a:s r="712">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="713">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="714">
                                          <a:s>FHIR.dateTime</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>,
        </a:s>
                                    <a:s r="716">
                                       <a:s r="715">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="716">
                                          <a:s>recordedDate</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
      )</a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="729">
                              <a:s r="722">
                                 <a:s>'Condition/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="724">
                                 <a:s r="723">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="724">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="734">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="730">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="761">
                     <a:s>sort by </a:s>
                     <a:s r="760">
                        <a:s r="757">
                           <a:s>(</a:s>
                           <a:s r="757">
                              <a:s r="758">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="759">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="767" locator="134:3-147:31" xsi:type="Query">
            <source localId="647" locator="134:3-134:25" alias="C">
               <expression localId="693" locator="134:3-134:23" name="PertinentConditions" xsi:type="ExpressionRef"/>
            </source>
            <return localId="694" locator="135:3-146:3">
               <expression localId="695" locator="135:10-146:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="699" locator="136:11-136:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="698" locator="136:30-136:35" path="code" scope="C" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="709" locator="137:12-137:48" path="value" xsi:type="Property">
                        <source localId="708" locator="137:12-137:42" path="code" xsi:type="Property">
                           <source localId="700" locator="137:12-137:37" xsi:type="Indexer">
                              <signature localId="705" xsi:type="ListTypeSpecifier">
                                 <elementType localId="706" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
                              </signature>
                              <signature localId="707" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="703" locator="137:12-137:34" path="coding" xsi:type="Property">
                                 <source localId="702" locator="137:12-137:27" path="clinicalStatus" scope="C" xsi:type="Property"/>
                              </operand>
                              <operand localId="704" locator="137:36" valueType="t:Integer" value="0" xsi:type="Literal"/>
                           </source>
                        </source>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="720" locator="138:11-143:5" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="719" locator="139:7-142:7" xsi:type="Coalesce">
                           <operand localId="711" locator="140:9-140:32" strict="false" xsi:type="As">
                              <operand localId="713" locator="140:9-140:15" path="onset" scope="C" xsi:type="Property"/>
                              <asTypeSpecifier localId="714" locator="140:20-140:32" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           </operand>
                           <operand localId="716" locator="141:9-141:22" path="recordedDate" scope="C" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="729" locator="144:16-144:34" xsi:type="Concatenate">
                        <operand localId="722" locator="144:16-144:27" valueType="t:String" value="Condition/" xsi:type="Literal"/>
                        <operand localId="725" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="726" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="724" locator="144:31-144:34" path="id" scope="C" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="734" locator="145:13-145:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="730" locator="145:34" name="C" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="761" locator="147:3-147:31">
               <by localId="760" locator="147:11-147:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="757" locator="147:11-147:26" strict="false" xsi:type="As">
                     <operand localId="758" locator="147:12-147:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="759" locator="147:20-147:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="773" locator="153:1-158:51" name="PertinentFamilyMemberHistory" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="773">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT FAMILY MEMBER HISTORY
//------------------------------------------------------------------------------  

define PertinentFamilyMemberHistory:
  </a:s>
               <a:s r="883">
                  <a:s r="842">
                     <a:s r="801">
                        <a:s r="778">
                           <a:s r="775">
                              <a:s r="774">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="775">
                                 <a:s>FamilyHxCRCConditions</a:s>
                              </a:s>
                           </a:s>
                           <a:s> union
  </a:s>
                           <a:s r="777">
                              <a:s r="776">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="777">
                                 <a:s>FamilyHxPrecancerousPolypConditions</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> union 
  </a:s>
                        <a:s r="780">
                           <a:s r="779">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="780">
                              <a:s>FamilyHxDiagnosisOfCRC</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> union
  </a:s>
                     <a:s r="821">
                        <a:s r="820">
                           <a:s>DataElements</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="821">
                           <a:s>FamilyHxDiagnosisOfHistoryOfCRC</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s> union
  </a:s>
                  <a:s r="862">
                     <a:s r="861">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="862">
                        <a:s>FamilyHxDiagnosisOfPrecancerousPolyp</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="883" locator="154:3-158:51" xsi:type="Union">
            <signature localId="884" xsi:type="ListTypeSpecifier">
               <elementType localId="885" xsi:type="ChoiceTypeSpecifier">
                  <choice localId="886" xsi:type="TupleTypeSpecifier">
                     <element localId="887" name="familyMemberHistory">
                        <elementType localId="888" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="889" name="conditions">
                        <elementType localId="890" xsi:type="ListTypeSpecifier">
                           <elementType localId="891" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </choice>
                  <choice localId="892" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </signature>
            <signature localId="893" xsi:type="ListTypeSpecifier">
               <elementType localId="894" xsi:type="ChoiceTypeSpecifier">
                  <choice localId="895" xsi:type="TupleTypeSpecifier">
                     <element localId="896" name="familyMemberHistory">
                        <elementType localId="897" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="898" name="conditions">
                        <elementType localId="899" xsi:type="ListTypeSpecifier">
                           <elementType localId="900" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </element>
                  </choice>
                  <choice localId="901" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </signature>
            <operand localId="863" xsi:type="As">
               <operand localId="842" locator="154:3-157:46" xsi:type="Union">
                  <signature localId="843" xsi:type="ListTypeSpecifier">
                     <elementType localId="844" xsi:type="ChoiceTypeSpecifier">
                        <choice localId="845" xsi:type="TupleTypeSpecifier">
                           <element localId="846" name="familyMemberHistory">
                              <elementType localId="847" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="848" name="conditions">
                              <elementType localId="849" xsi:type="ListTypeSpecifier">
                                 <elementType localId="850" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </choice>
                        <choice localId="851" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </signature>
                  <signature localId="852" xsi:type="ListTypeSpecifier">
                     <elementType localId="853" xsi:type="ChoiceTypeSpecifier">
                        <choice localId="854" xsi:type="TupleTypeSpecifier">
                           <element localId="855" name="familyMemberHistory">
                              <elementType localId="856" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="857" name="conditions">
                              <elementType localId="858" xsi:type="ListTypeSpecifier">
                                 <elementType localId="859" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </choice>
                        <choice localId="860" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </signature>
                  <operand localId="822" xsi:type="As">
                     <operand localId="801" locator="154:3-156:37" xsi:type="Union">
                        <signature localId="802" xsi:type="ListTypeSpecifier">
                           <elementType localId="803" xsi:type="ChoiceTypeSpecifier">
                              <choice localId="804" xsi:type="TupleTypeSpecifier">
                                 <element localId="805" name="familyMemberHistory">
                                    <elementType localId="806" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element localId="807" name="conditions">
                                    <elementType localId="808" xsi:type="ListTypeSpecifier">
                                       <elementType localId="809" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                              </choice>
                              <choice localId="810" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </signature>
                        <signature localId="811" xsi:type="ListTypeSpecifier">
                           <elementType localId="812" xsi:type="ChoiceTypeSpecifier">
                              <choice localId="813" xsi:type="TupleTypeSpecifier">
                                 <element localId="814" name="familyMemberHistory">
                                    <elementType localId="815" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                 </element>
                                 <element localId="816" name="conditions">
                                    <elementType localId="817" xsi:type="ListTypeSpecifier">
                                       <elementType localId="818" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </element>
                              </choice>
                              <choice localId="819" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </signature>
                        <operand localId="781" xsi:type="As">
                           <operand localId="778" locator="154:3-155:50" xsi:type="Union">
                              <operand localId="775" locator="154:3-154:36" name="FamilyHxCRCConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                              <operand localId="777" locator="155:3-155:50" name="FamilyHxPrecancerousPolypConditions" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           </operand>
                           <asTypeSpecifier localId="782" xsi:type="ListTypeSpecifier">
                              <elementType localId="783" xsi:type="ChoiceTypeSpecifier">
                                 <choice localId="784" xsi:type="TupleTypeSpecifier">
                                    <element localId="785" name="familyMemberHistory">
                                       <elementType localId="786" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element localId="787" name="conditions">
                                       <elementType localId="788" xsi:type="ListTypeSpecifier">
                                          <elementType localId="789" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                 </choice>
                                 <choice localId="790" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </asTypeSpecifier>
                        </operand>
                        <operand localId="791" xsi:type="As">
                           <operand localId="780" locator="156:3-156:37" name="FamilyHxDiagnosisOfCRC" libraryName="DataElements" xsi:type="ExpressionRef"/>
                           <asTypeSpecifier localId="792" xsi:type="ListTypeSpecifier">
                              <elementType localId="793" xsi:type="ChoiceTypeSpecifier">
                                 <choice localId="794" xsi:type="TupleTypeSpecifier">
                                    <element localId="795" name="familyMemberHistory">
                                       <elementType localId="796" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                                    </element>
                                    <element localId="797" name="conditions">
                                       <elementType localId="798" xsi:type="ListTypeSpecifier">
                                          <elementType localId="799" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                       </elementType>
                                    </element>
                                 </choice>
                                 <choice localId="800" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </asTypeSpecifier>
                        </operand>
                     </operand>
                     <asTypeSpecifier localId="823" xsi:type="ListTypeSpecifier">
                        <elementType localId="824" xsi:type="ChoiceTypeSpecifier">
                           <choice localId="825" xsi:type="TupleTypeSpecifier">
                              <element localId="826" name="familyMemberHistory">
                                 <elementType localId="827" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="828" name="conditions">
                                 <elementType localId="829" xsi:type="ListTypeSpecifier">
                                    <elementType localId="830" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </choice>
                           <choice localId="831" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
                  <operand localId="832" xsi:type="As">
                     <operand localId="821" locator="157:3-157:46" name="FamilyHxDiagnosisOfHistoryOfCRC" libraryName="DataElements" xsi:type="ExpressionRef"/>
                     <asTypeSpecifier localId="833" xsi:type="ListTypeSpecifier">
                        <elementType localId="834" xsi:type="ChoiceTypeSpecifier">
                           <choice localId="835" xsi:type="TupleTypeSpecifier">
                              <element localId="836" name="familyMemberHistory">
                                 <elementType localId="837" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="838" name="conditions">
                                 <elementType localId="839" xsi:type="ListTypeSpecifier">
                                    <elementType localId="840" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </choice>
                           <choice localId="841" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                        </elementType>
                     </asTypeSpecifier>
                  </operand>
               </operand>
               <asTypeSpecifier localId="864" xsi:type="ListTypeSpecifier">
                  <elementType localId="865" xsi:type="ChoiceTypeSpecifier">
                     <choice localId="866" xsi:type="TupleTypeSpecifier">
                        <element localId="867" name="familyMemberHistory">
                           <elementType localId="868" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="869" name="conditions">
                           <elementType localId="870" xsi:type="ListTypeSpecifier">
                              <elementType localId="871" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </choice>
                     <choice localId="872" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </asTypeSpecifier>
            </operand>
            <operand localId="873" xsi:type="As">
               <operand localId="862" locator="158:3-158:51" name="FamilyHxDiagnosisOfPrecancerousPolyp" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <asTypeSpecifier localId="874" xsi:type="ListTypeSpecifier">
                  <elementType localId="875" xsi:type="ChoiceTypeSpecifier">
                     <choice localId="876" xsi:type="TupleTypeSpecifier">
                        <element localId="877" name="familyMemberHistory">
                           <elementType localId="878" name="fhir:FamilyMemberHistory" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="879" name="conditions">
                           <elementType localId="880" xsi:type="ListTypeSpecifier">
                              <elementType localId="881" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </choice>
                     <choice localId="882" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
                  </elementType>
               </asTypeSpecifier>
            </operand>
         </expression>
      </def>
      <def localId="919" locator="324:1-330:4" name="Onset" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="919">
               <a:s>define function Onset(c FHIR.FamilyMemberHistory.Condition):
  </a:s>
               <a:s r="1691">
                  <a:s r="1691">
                     <a:s>Coalesce( </a:s>
                     <a:s r="1663">
                        <a:s>List{
    </a:s>
                        <a:s r="1669">
                           <a:s r="1664">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1669">
                              <a:s>QuantityText(</a:s>
                              <a:s r="1665">
                                 <a:s r="1667">
                                    <a:s r="1666">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1667">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1668">
                                    <a:s>FHIR.Age</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1675">
                           <a:s r="1670">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1675">
                              <a:s>PeriodObject(</a:s>
                              <a:s r="1671">
                                 <a:s r="1673">
                                    <a:s r="1672">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1673">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1674">
                                    <a:s>FHIR.Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1681">
                           <a:s r="1676">
                              <a:s>Common</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1681">
                              <a:s>RangeObject(</a:s>
                              <a:s r="1677">
                                 <a:s r="1679">
                                    <a:s r="1678">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1679">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1680">
                                    <a:s>FHIR.Range</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1686">
                           <a:s r="1682">
                              <a:s>(</a:s>
                              <a:s r="1682">
                                 <a:s r="1684">
                                    <a:s r="1683">
                                       <a:s>c</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1684">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="1685">
                                    <a:s>FHIR.string</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1686">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1691" locator="325:3-330:4" xsi:type="Coalesce">
            <signature localId="1692" xsi:type="ListTypeSpecifier">
               <elementType localId="1693" name="t:Any" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="1663" locator="325:13-330:3" xsi:type="List">
               <element localId="1669" locator="326:5-326:44" name="QuantityText" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1665" locator="326:25-326:43" strict="false" xsi:type="As">
                     <operand localId="1667" locator="326:25-326:31" path="onset" xsi:type="Property">
                        <source localId="1666" locator="326:25" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1668" locator="326:36-326:43" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1675" locator="327:5-327:47" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1671" locator="327:25-327:46" strict="false" xsi:type="As">
                     <operand localId="1673" locator="327:25-327:31" path="onset" xsi:type="Property">
                        <source localId="1672" locator="327:25" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1674" locator="327:36-327:46" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1681" locator="328:5-328:45" name="RangeObject" libraryName="Common" xsi:type="FunctionRef">
                  <operand localId="1677" locator="328:24-328:44" strict="false" xsi:type="As">
                     <operand localId="1679" locator="328:24-328:30" path="onset" xsi:type="Property">
                        <source localId="1678" locator="328:24" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1680" locator="328:35-328:44" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </element>
               <element localId="1686" locator="329:5-329:34" path="value" xsi:type="Property">
                  <source localId="1682" locator="329:5-329:28" strict="false" xsi:type="As">
                     <operand localId="1684" locator="329:6-329:12" path="onset" xsi:type="Property">
                        <source localId="1683" locator="329:6" name="c" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="1685" locator="329:17-329:27" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  </source>
               </element>
            </operand>
         </expression>
         <operand localId="921" name="c">
            <operandTypeSpecifier localId="920" locator="324:25-324:58" name="fhir:FamilyMemberHistory.Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="770" locator="160:1-169:3" name="PertinentFamilyMemberHistorySummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="770">
               <a:s>define PertinentFamilyMemberHistorySummary:
  </a:s>
               <a:s r="968">
                  <a:s>
                     <a:s r="771">
                        <a:s r="902">
                           <a:s>(</a:s>
                           <a:s r="902">
                              <a:s>PertinentFamilyMemberHistory</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> FMH</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="903">
                     <a:s>return
      </a:s>
                     <a:s r="967">
                        <a:s>
                           <a:s r="904">
                              <a:s r="906">
                                 <a:s>
                                    <a:s>FMH.conditions</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> C</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="907">
                           <a:s>return </a:s>
                           <a:s r="908">
                              <a:s>{
        </a:s>
                              <a:s>
                                 <a:s>name: </a:s>
                                 <a:s r="913">
                                    <a:s r="909">
                                       <a:s>Common</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="913">
                                       <a:s>ConceptText(</a:s>
                                       <a:s r="912">
                                          <a:s r="911">
                                             <a:s r="910">
                                                <a:s>FMH</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="911">
                                                <a:s>familyMemberHistory</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="912">
                                             <a:s>relationship</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
        </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="917">
                                    <a:s r="914">
                                       <a:s>Common</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="917">
                                       <a:s>ConceptText(</a:s>
                                       <a:s r="916">
                                          <a:s r="915">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="916">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
        </a:s>
                              <a:s>
                                 <a:s>onset: </a:s>
                                 <a:s r="922">
                                    <a:s>Onset(</a:s>
                                    <a:s r="918">
                                       <a:s>C</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
        </a:s>
                              <a:s>
                                 <a:s>reference: </a:s>
                                 <a:s r="963">
                                    <a:s r="955">
                                       <a:s>'FamilyMemberHistory/'</a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="958">
                                       <a:s r="957">
                                          <a:s r="956">
                                             <a:s>FMH</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="957">
                                             <a:s>familyMemberHistory</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="958">
                                          <a:s>id</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
        </a:s>
                              <a:s>
                                 <a:s>edited: </a:s>
                                 <a:s r="966">
                                    <a:s>HasBeenLocallyEdited(</a:s>
                                    <a:s r="965">
                                       <a:s r="964">
                                          <a:s>FMH</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="965">
                                          <a:s>familyMemberHistory</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
  }</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="968" locator="161:3-169:3" xsi:type="Query">
            <source localId="771" locator="161:3-161:36" alias="FMH">
               <expression localId="902" locator="161:3-161:32" name="PertinentFamilyMemberHistory" xsi:type="ExpressionRef"/>
            </source>
            <return localId="903" locator="162:5-169:3">
               <expression localId="967" locator="163:7-169:3" xsi:type="Query">
                  <source localId="904" locator="163:7-163:22" alias="C">
                     <expression localId="906" locator="163:7-163:20" path="conditions" scope="FMH" xsi:type="Property"/>
                  </source>
                  <return localId="907" locator="163:24-169:3">
                     <expression localId="908" locator="163:31-169:3" xsi:type="Tuple">
                        <element name="name">
                           <value localId="913" locator="164:15-164:70" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                              <operand localId="912" locator="164:34-164:69" path="relationship" xsi:type="Property">
                                 <source localId="911" locator="164:34-164:56" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                              </operand>
                           </value>
                        </element>
                        <element name="value">
                           <value localId="917" locator="165:16-165:41" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                              <operand localId="916" locator="165:35-165:40" path="code" scope="C" xsi:type="Property"/>
                           </value>
                        </element>
                        <element name="onset">
                           <value localId="922" locator="166:16-166:23" name="Onset" xsi:type="FunctionRef">
                              <operand localId="918" locator="166:22" name="C" xsi:type="AliasRef"/>
                           </value>
                        </element>
                        <element name="reference">
                           <value localId="963" locator="167:20-167:70" xsi:type="Concatenate">
                              <operand localId="955" locator="167:20-167:41" valueType="t:String" value="FamilyMemberHistory/" xsi:type="Literal"/>
                              <operand localId="959" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature localId="960" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="958" locator="167:45-167:70" path="id" xsi:type="Property">
                                    <source localId="957" locator="167:45-167:67" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                                 </operand>
                              </operand>
                           </value>
                        </element>
                        <element name="edited">
                           <value localId="966" locator="168:17-168:61" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                              <operand localId="965" locator="168:38-168:60" path="familyMemberHistory" scope="FMH" xsi:type="Property"/>
                           </value>
                        </element>
                     </expression>
                  </return>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="974" locator="175:1-178:15" name="PertinentObservations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="974">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT OBSERVATIONS
//------------------------------------------------------------------------------

define PertinentObservations:
  </a:s>
               <a:s r="986">
                  <a:s r="979">
                     <a:s>(</a:s>
                     <a:s r="979">
                        <a:s r="976">
                           <a:s r="975">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="976">
                              <a:s>NewOrWorseningColorectalSymptomsObservations</a:s>
                           </a:s>
                        </a:s>
                        <a:s> union
  </a:s>
                        <a:s r="978">
                           <a:s r="977">
                              <a:s>DataElements</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="978">
                              <a:s>ReducedLifeExpectancyObservations</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>
  except </a:s>
                  <a:s r="984">
                     <a:s r="985">{null}</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="986" locator="176:3-178:15" xsi:type="Except">
            <operand localId="979" locator="176:3-177:49" xsi:type="Union">
               <signature localId="980" xsi:type="ListTypeSpecifier">
                  <elementType localId="981" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <signature localId="982" xsi:type="ListTypeSpecifier">
                  <elementType localId="983" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <operand localId="976" locator="176:4-176:60" name="NewOrWorseningColorectalSymptomsObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
               <operand localId="978" locator="177:3-177:48" name="ReducedLifeExpectancyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            </operand>
            <operand localId="987" xsi:type="Query">
               <source localId="988" alias="X">
                  <expression localId="984" locator="178:10-178:15" xsi:type="List">
                     <element localId="985" locator="178:11-178:14" xsi:type="Null"/>
                  </expression>
               </source>
               <return localId="989" distinct="false">
                  <expression localId="991" asType="fhir:Observation" xsi:type="As">
                     <operand localId="990" name="X" xsi:type="AliasRef"/>
                  </expression>
               </return>
            </operand>
         </expression>
      </def>
      <def localId="971" locator="180:1-189:31" name="PertinentObservationsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="971">
               <a:s>define PertinentObservationsSummary:
  </a:s>
               <a:s r="1028">
                  <a:s>
                     <a:s r="972">
                        <a:s r="992">
                           <a:s>(</a:s>
                           <a:s r="992">
                              <a:s>PertinentObservations</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> Obs</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="993">
                     <a:s>return </a:s>
                     <a:s r="994">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="998">
                              <a:s r="995">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="998">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="997">
                                    <a:s r="996">
                                       <a:s>Obs</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="997">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1002">
                              <a:s r="999">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1002">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1001">
                                    <a:s r="1000">
                                       <a:s>Obs</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1001">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1006">
                              <a:s r="1004">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1006">
                                 <a:s>ObservationDateString(</a:s>
                                 <a:s r="1005">
                                    <a:s>Obs</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1015">
                              <a:s r="1008">
                                 <a:s>'Observation/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1010">
                                 <a:s r="1009">
                                    <a:s>Obs</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1010">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1017">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1016">
                                 <a:s>Obs</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1022">
                     <a:s>sort by </a:s>
                     <a:s r="1021">
                        <a:s r="1018">
                           <a:s>(</a:s>
                           <a:s r="1018">
                              <a:s r="1019">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1020">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1028" locator="181:3-189:31" xsi:type="Query">
            <source localId="972" locator="181:3-181:29" alias="Obs">
               <expression localId="992" locator="181:3-181:25" name="PertinentObservations" xsi:type="ExpressionRef"/>
            </source>
            <return localId="993" locator="182:3-188:3">
               <expression localId="994" locator="182:10-188:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="998" locator="183:11-183:38" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="997" locator="183:30-183:37" path="code" scope="Obs" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1002" locator="184:12-184:40" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1003" asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1001" locator="184:31-184:39" path="value" scope="Obs" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1006" locator="185:11-185:43" name="ObservationDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1005" locator="185:40-185:42" name="Obs" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1015" locator="186:16-186:38" xsi:type="Concatenate">
                        <operand localId="1008" locator="186:16-186:29" valueType="t:String" value="Observation/" xsi:type="Literal"/>
                        <operand localId="1011" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1012" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1010" locator="186:33-186:38" path="id" scope="Obs" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1017" locator="187:13-187:37" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1016" locator="187:34-187:36" name="Obs" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1022" locator="189:3-189:31">
               <by localId="1021" locator="189:11-189:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="1018" locator="189:11-189:26" strict="false" xsi:type="As">
                     <operand localId="1019" locator="189:12-189:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="1020" locator="189:20-189:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="1034" locator="195:1-196:39" name="PertinentProcedures" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1034">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT PROCEDURES
//------------------------------------------------------------------------------

define PertinentProcedures:
  </a:s>
               <a:s r="1036">
                  <a:s r="1035">
                     <a:s>DataElements</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1036">
                     <a:s>TotalColectomyProcedures</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1036" locator="196:3-196:39" name="TotalColectomyProcedures" libraryName="DataElements" xsi:type="ExpressionRef"/>
      </def>
      <def localId="1031" locator="198:1-206:21" name="PertinentProceduresSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1031">
               <a:s>define PertinentProceduresSummary:
  </a:s>
               <a:s r="1069">
                  <a:s>
                     <a:s r="1032">
                        <a:s r="1037">
                           <a:s>(</a:s>
                           <a:s r="1037">
                              <a:s>PertinentProcedures</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1038">
                     <a:s>return </a:s>
                     <a:s r="1039">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1043">
                              <a:s r="1040">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1043">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1042">
                                    <a:s r="1041">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1042">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1046">
                              <a:s r="1045">
                                 <a:s r="1044">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1045">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1046">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1049">
                              <a:s r="1047">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1049">
                                 <a:s>ProcedureDateString(</a:s>
                                 <a:s r="1048">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1058">
                              <a:s r="1051">
                                 <a:s>'Procedure/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1053">
                                 <a:s r="1052">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1053">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1060">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1059">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s> </a:s>
                  <a:s r="1063">
                     <a:s>sort by </a:s>
                     <a:s r="1062">
                        <a:s r="1061">
                           <a:s>date</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1069" locator="199:3-206:21" xsi:type="Query">
            <source localId="1032" locator="199:3-199:25" alias="P">
               <expression localId="1037" locator="199:3-199:23" name="PertinentProcedures" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1038" locator="200:3-206:3">
               <expression localId="1039" locator="200:10-206:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1043" locator="201:11-201:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1042" locator="201:30-201:35" path="code" scope="P" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1046" locator="202:12-202:25" path="value" xsi:type="Property">
                        <source localId="1045" locator="202:12-202:19" path="status" scope="P" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1049" locator="203:11-203:39" name="ProcedureDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1048" locator="203:38" name="P" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1058" locator="204:16-204:34" xsi:type="Concatenate">
                        <operand localId="1051" locator="204:16-204:27" valueType="t:String" value="Procedure/" xsi:type="Literal"/>
                        <operand localId="1054" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1055" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1053" locator="204:31-204:34" path="id" scope="P" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1060" locator="205:13-205:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1059" locator="205:34" name="P" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1063" locator="206:5-206:21">
               <by localId="1062" locator="206:13-206:21" direction="desc" path="date" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="1081" locator="332:1-342:3" name="FormatReports" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1081">
               <a:s>define function FormatReports(DrList List&lt;DiagnosticReport>, ObsList List&lt;Observation>, ReportType String):
  </a:s>
               <a:s r="1723">
                  <a:s r="1723">
                     <a:s>
                        <a:s r="1694">
                           <a:s r="1695">
                              <a:s>(</a:s>
                              <a:s r="1695">
                                 <a:s>DrList</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> D</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="1696">
                           <a:s>CollatedCodes: </a:s>
                           <a:s r="1700">
                              <a:s r="1697">
                                 <a:s>CRCSMCommon</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1700">
                                 <a:s>CollateConclusionCodes(</a:s>
                                 <a:s r="1698">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>,</a:s>
                                 <a:s r="1699">
                                    <a:s>ObsList</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  </a:s>
                     <a:s r="1701">
                        <a:s>return </a:s>
                        <a:s r="1702">
                           <a:s>{
    </a:s>
                           <a:s>
                              <a:s>name: </a:s>
                              <a:s r="1703">
                                 <a:s>ReportType</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>longName: </a:s>
                              <a:s r="1707">
                                 <a:s r="1704">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1707">
                                    <a:s>ConceptText(</a:s>
                                    <a:s r="1706">
                                       <a:s r="1705">
                                          <a:s>D</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1706">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>value: </a:s>
                              <a:s r="1708">
                                 <a:s>CollatedCodes</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, //TODO: what to return for report value??
    </a:s>
                           <a:s>
                              <a:s>date: </a:s>
                              <a:s r="1711">
                                 <a:s r="1709">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1711">
                                    <a:s>DiagnosticReportDateString(</a:s>
                                    <a:s r="1710">
                                       <a:s>D</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>reference: </a:s>
                              <a:s r="1720">
                                 <a:s r="1713">
                                    <a:s>'DiagnosticReport/'</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="1715">
                                    <a:s r="1714">
                                       <a:s>D</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1715">
                                       <a:s>id</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
    </a:s>
                           <a:s>
                              <a:s>edited: </a:s>
                              <a:s r="1722">
                                 <a:s>HasBeenLocallyEdited(</a:s>
                                 <a:s r="1721">
                                    <a:s>D</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  }</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1723" locator="333:3-342:3" xsi:type="Query">
            <source localId="1694" locator="333:3-333:12" alias="D">
               <expression localId="1695" locator="333:3-333:10" name="DrList" xsi:type="OperandRef"/>
            </source>
            <let localId="1696" locator="334:7-334:66" identifier="CollatedCodes">
               <expression localId="1700" locator="334:22-334:66" name="CollateConclusionCodes" libraryName="CRCSMCommon" xsi:type="FunctionRef">
                  <operand localId="1698" locator="334:57" name="D" xsi:type="AliasRef"/>
                  <operand localId="1699" locator="334:59-334:65" name="ObsList" xsi:type="OperandRef"/>
               </expression>
            </let>
            <return localId="1701" locator="335:3-342:3">
               <expression localId="1702" locator="335:10-342:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1703" locator="336:11-336:20" name="ReportType" xsi:type="OperandRef"/>
                  </element>
                  <element name="longName">
                     <value localId="1707" locator="337:15-337:40" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1706" locator="337:34-337:39" path="code" scope="D" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1708" locator="338:12-338:24" name="CollatedCodes" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="date">
                     <value localId="1711" locator="339:11-339:46" name="DiagnosticReportDateString" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1710" locator="339:45" name="D" xsi:type="AliasRef"/>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1720" locator="340:16-340:41" xsi:type="Concatenate">
                        <operand localId="1713" locator="340:16-340:34" valueType="t:String" value="DiagnosticReport/" xsi:type="Literal"/>
                        <operand localId="1716" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1717" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1715" locator="340:38-340:41" path="id" scope="D" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1722" locator="341:13-341:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1721" locator="341:34" name="D" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand localId="1084" name="DrList">
            <operandTypeSpecifier localId="1082" locator="332:38-332:59" xsi:type="ListTypeSpecifier">
               <elementType localId="1083" locator="332:43-332:58" name="fhir:DiagnosticReport" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand localId="1087" name="ObsList">
            <operandTypeSpecifier localId="1085" locator="332:70-332:86" xsi:type="ListTypeSpecifier">
               <elementType localId="1086" locator="332:75-332:85" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand localId="1089" name="ReportType">
            <operandTypeSpecifier localId="1088" locator="332:100-332:105" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1075" locator="222:1-223:109" name="FOBTDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1075">
               <a:s>define FOBTDiagnosticReportsSummary:
  </a:s>
               <a:s r="1090">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1077">
                     <a:s r="1076">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1077">
                        <a:s>FOBTDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1079">
                     <a:s r="1078">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1079">
                        <a:s>FOBTObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1080">
                     <a:s>'Fecal Occult Blood Test'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1090" locator="223:3-223:109" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1077" locator="223:17-223:50" name="FOBTDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1079" locator="223:53-223:81" name="FOBTObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1080" locator="223:84-223:108" valueType="t:String" value="Fecal Occult Blood Test" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1123" locator="225:1-226:118" name="sDNAFITDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1123">
               <a:s>define sDNAFITDiagnosticReportsSummary:
  </a:s>
               <a:s r="1129">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1125">
                     <a:s r="1124">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1125">
                        <a:s>StoolDNAFITDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1127">
                     <a:s r="1126">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1127">
                        <a:s>StoolDNAFITObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1128">
                     <a:s>'Stool DNA FIT Test'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1129" locator="226:3-226:118" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1125" locator="226:17-226:57" name="StoolDNAFITDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1127" locator="226:60-226:95" name="StoolDNAFITObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1128" locator="226:98-226:117" valueType="t:String" value="Stool DNA FIT Test" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1165" locator="228:1-229:111" name="ColonoscopyDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1165">
               <a:s>define ColonoscopyDiagnosticReportsSummary:
  </a:s>
               <a:s r="1171">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1167">
                     <a:s r="1166">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1167">
                        <a:s>ColonoscopyDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1169">
                     <a:s r="1168">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1169">
                        <a:s>ColonoscopyObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1170">
                     <a:s>'Colonoscopy'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1171" locator="229:3-229:111" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1167" locator="229:17-229:57" name="ColonoscopyDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1169" locator="229:60-229:95" name="ColonoscopyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1170" locator="229:98-229:110" valueType="t:String" value="Colonoscopy" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1207" locator="231:1-232:121" name="CTColonographyDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1207">
               <a:s>define CTColonographyDiagnosticReportsSummary:
  </a:s>
               <a:s r="1213">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1209">
                     <a:s r="1208">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1209">
                        <a:s>CTColonographyDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1211">
                     <a:s r="1210">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1211">
                        <a:s>CTColonographyObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1212">
                     <a:s>'CT Colonography'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1213" locator="232:3-232:121" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1209" locator="232:17-232:60" name="CTColonographyDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1211" locator="232:63-232:101" name="CTColonographyObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1212" locator="232:104-232:120" valueType="t:String" value="CT Colonography" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1282" locator="234:1-235:114" name="FlexSigDiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1282">
               <a:s>define FlexSigDiagnosticReportsSummary:
  </a:s>
               <a:s r="1288">
                  <a:s>FormatReports(</a:s>
                  <a:s r="1284">
                     <a:s r="1283">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1284">
                        <a:s>FlexSigDiagnosticReports</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1286">
                     <a:s r="1285">
                        <a:s>DataElements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1286">
                        <a:s>FlexSigObservations</a:s>
                     </a:s>
                  </a:s>
                  <a:s>, </a:s>
                  <a:s r="1287">
                     <a:s>'Flexible Sigmoidoscopy'</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1288" locator="235:3-235:114" name="FormatReports" xsi:type="FunctionRef">
            <operand localId="1284" locator="235:17-235:53" name="FlexSigDiagnosticReports" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1286" locator="235:56-235:87" name="FlexSigObservations" libraryName="DataElements" xsi:type="ExpressionRef"/>
            <operand localId="1287" locator="235:90-235:113" valueType="t:String" value="Flexible Sigmoidoscopy" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="1072" locator="212:1-220:19" name="DiagnosticReportsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1072">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT DIAGNOSTIC REPORTS
//------------------------------------------------------------------------------

define DiagnosticReportsSummary:
  </a:s>
               <a:s r="1331">
                  <a:s>
                     <a:s r="1073">
                        <a:s r="1290">
                           <a:s>(
    </a:s>
                           <a:s r="1290">
                              <a:s r="1248">
                                 <a:s r="1173">
                                    <a:s r="1131">
                                       <a:s r="1121">
                                          <a:s>FOBTDiagnosticReportsSummary</a:s>
                                       </a:s>
                                       <a:s>
    union </a:s>
                                       <a:s r="1130">
                                          <a:s>sDNAFITDiagnosticReportsSummary</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    union </a:s>
                                    <a:s r="1172">
                                       <a:s>ColonoscopyDiagnosticReportsSummary</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    union </a:s>
                                 <a:s r="1214">
                                    <a:s>CTColonographyDiagnosticReportsSummary</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    union </a:s>
                              <a:s r="1289">
                                 <a:s>FlexSigDiagnosticReportsSummary</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  )</a:s>
                        </a:s>
                        <a:s> D</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1325">
                     <a:s>sort by </a:s>
                     <a:s r="1324">
                        <a:s r="1323">
                           <a:s>date</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1331" locator="213:3-220:19" xsi:type="Query">
            <source localId="1073" locator="213:3-219:5" alias="D">
               <expression localId="1290" locator="213:3-219:3" xsi:type="Union">
                  <signature localId="1291" xsi:type="ListTypeSpecifier">
                     <elementType localId="1292" xsi:type="TupleTypeSpecifier">
                        <element localId="1293" name="name">
                           <elementType localId="1294" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1295" name="longName">
                           <elementType localId="1296" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1297" name="value">
                           <elementType localId="1298" xsi:type="ListTypeSpecifier">
                              <elementType localId="1299" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element localId="1300" name="date">
                           <elementType localId="1301" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1302" name="reference">
                           <elementType localId="1303" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1304" name="edited">
                           <elementType localId="1305" xsi:type="ListTypeSpecifier">
                              <elementType localId="1306" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </signature>
                  <signature localId="1307" xsi:type="ListTypeSpecifier">
                     <elementType localId="1308" xsi:type="TupleTypeSpecifier">
                        <element localId="1309" name="name">
                           <elementType localId="1310" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1311" name="longName">
                           <elementType localId="1312" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1313" name="value">
                           <elementType localId="1314" xsi:type="ListTypeSpecifier">
                              <elementType localId="1315" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                        <element localId="1316" name="date">
                           <elementType localId="1317" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1318" name="reference">
                           <elementType localId="1319" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1320" name="edited">
                           <elementType localId="1321" xsi:type="ListTypeSpecifier">
                              <elementType localId="1322" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                           </elementType>
                        </element>
                     </elementType>
                  </signature>
                  <operand localId="1248" locator="214:5-217:48" xsi:type="Union">
                     <signature localId="1249" xsi:type="ListTypeSpecifier">
                        <elementType localId="1250" xsi:type="TupleTypeSpecifier">
                           <element localId="1251" name="name">
                              <elementType localId="1252" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1253" name="longName">
                              <elementType localId="1254" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1255" name="value">
                              <elementType localId="1256" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1257" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element localId="1258" name="date">
                              <elementType localId="1259" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1260" name="reference">
                              <elementType localId="1261" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1262" name="edited">
                              <elementType localId="1263" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1264" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </elementType>
                     </signature>
                     <signature localId="1265" xsi:type="ListTypeSpecifier">
                        <elementType localId="1266" xsi:type="TupleTypeSpecifier">
                           <element localId="1267" name="name">
                              <elementType localId="1268" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1269" name="longName">
                              <elementType localId="1270" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1271" name="value">
                              <elementType localId="1272" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1273" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                           <element localId="1274" name="date">
                              <elementType localId="1275" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1276" name="reference">
                              <elementType localId="1277" name="t:String" xsi:type="NamedTypeSpecifier"/>
                           </element>
                           <element localId="1278" name="edited">
                              <elementType localId="1279" xsi:type="ListTypeSpecifier">
                                 <elementType localId="1280" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                              </elementType>
                           </element>
                        </elementType>
                     </signature>
                     <operand localId="1131" locator="214:5-215:41" xsi:type="Union">
                        <signature localId="1132" xsi:type="ListTypeSpecifier">
                           <elementType localId="1133" xsi:type="TupleTypeSpecifier">
                              <element localId="1134" name="name">
                                 <elementType localId="1135" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1136" name="longName">
                                 <elementType localId="1137" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1138" name="value">
                                 <elementType localId="1139" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1140" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element localId="1141" name="date">
                                 <elementType localId="1142" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1143" name="reference">
                                 <elementType localId="1144" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1145" name="edited">
                                 <elementType localId="1146" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1147" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </signature>
                        <signature localId="1148" xsi:type="ListTypeSpecifier">
                           <elementType localId="1149" xsi:type="TupleTypeSpecifier">
                              <element localId="1150" name="name">
                                 <elementType localId="1151" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1152" name="longName">
                                 <elementType localId="1153" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1154" name="value">
                                 <elementType localId="1155" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1156" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element localId="1157" name="date">
                                 <elementType localId="1158" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1159" name="reference">
                                 <elementType localId="1160" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1161" name="edited">
                                 <elementType localId="1162" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1163" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </signature>
                        <operand localId="1121" locator="214:5-214:32" name="FOBTDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                        <operand localId="1130" locator="215:11-215:41" name="sDNAFITDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="1215" xsi:type="Union">
                        <signature localId="1216" xsi:type="ListTypeSpecifier">
                           <elementType localId="1217" xsi:type="TupleTypeSpecifier">
                              <element localId="1218" name="name">
                                 <elementType localId="1219" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1220" name="longName">
                                 <elementType localId="1221" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1222" name="value">
                                 <elementType localId="1223" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1224" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element localId="1225" name="date">
                                 <elementType localId="1226" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1227" name="reference">
                                 <elementType localId="1228" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1229" name="edited">
                                 <elementType localId="1230" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1231" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </signature>
                        <signature localId="1232" xsi:type="ListTypeSpecifier">
                           <elementType localId="1233" xsi:type="TupleTypeSpecifier">
                              <element localId="1234" name="name">
                                 <elementType localId="1235" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1236" name="longName">
                                 <elementType localId="1237" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1238" name="value">
                                 <elementType localId="1239" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1240" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                              <element localId="1241" name="date">
                                 <elementType localId="1242" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1243" name="reference">
                                 <elementType localId="1244" name="t:String" xsi:type="NamedTypeSpecifier"/>
                              </element>
                              <element localId="1245" name="edited">
                                 <elementType localId="1246" xsi:type="ListTypeSpecifier">
                                    <elementType localId="1247" name="fhir:Extension" xsi:type="NamedTypeSpecifier"/>
                                 </elementType>
                              </element>
                           </elementType>
                        </signature>
                        <operand localId="1172" locator="216:11-216:45" name="ColonoscopyDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                        <operand localId="1214" locator="217:11-217:48" name="CTColonographyDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="1289" locator="218:11-218:41" name="FlexSigDiagnosticReportsSummary" xsi:type="ExpressionRef"/>
               </expression>
            </source>
            <sort localId="1325" locator="220:3-220:19">
               <by localId="1324" locator="220:11-220:19" direction="desc" path="date" xsi:type="ByColumn"/>
            </sort>
         </expression>
      </def>
      <def localId="1337" locator="249:1-250:45" name="PertinentEncounters" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1337">
               <a:s>//TODO: These are in Breast, could consider equivalents needed for colorectal - like polypectomy?
//define BiopsyDiagnosticReportsSummary:
//  FormatReports(DataElements.BiopsyDiagnosticReports, DataElements.BiopsyObservations, 'Breast Biopsy')  

//define IncompleteBiopsyDiagnosticReportsSummary:
//  FormatReports(ScreeningTestIncomplete.IncompleteScreeningPathology, DataElements.BiopsyObservations, 'Breast Biopsy')    

//------------------------------------------------------------------------------
// PERTINENT ENCOUNTERS
//------------------------------------------------------------------------------

define PertinentEncounters:
  </a:s>
               <a:s r="1339">
                  <a:s r="1338">
                     <a:s>DataElements</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1339">
                     <a:s>AllColorectalSymptomEncounters</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1339" locator="250:3-250:45" name="AllColorectalSymptomEncounters" libraryName="DataElements" xsi:type="ExpressionRef"/>
      </def>
      <def localId="1334" locator="252:1-261:3" name="PertinentEncountersSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1334">
               <a:s>define PertinentEncountersSummary:
  </a:s>
               <a:s r="1386">
                  <a:s>
                     <a:s r="1335">
                        <a:s r="1340">
                           <a:s>(</a:s>
                           <a:s r="1340">
                              <a:s>PertinentEncounters</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1341">
                     <a:s>return </a:s>
                     <a:s r="1342">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1351">
                              <a:s r="1343">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1351">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1344">
                                    <a:s r="1346">
                                       <a:s r="1345">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1346">
                                          <a:s>reasonCode</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1347">[0]</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1353">
                              <a:s r="1352">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1353">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date: </a:s>
                           <a:s r="1376">
                              <a:s r="1366">
                                 <a:s r="1362">
                                    <a:s r="1356">
                                       <a:s>Common</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1362">
                                       <a:s>DateTimeText(</a:s>
                                       <a:s r="1361">
                                          <a:s r="1357">
                                             <a:s>(</a:s>
                                             <a:s r="1357">
                                                <a:s r="1359">
                                                   <a:s r="1358">
                                                      <a:s>E</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1359">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> as </a:s>
                                                <a:s r="1360">
                                                   <a:s>FHIR.Period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1361">
                                             <a:s>&quot;start&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> +
      </a:s>
                                 <a:s r="1363">
                                    <a:s>' to '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> +
      </a:s>
                              <a:s r="1373">
                                 <a:s r="1367">
                                    <a:s>Common</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1373">
                                    <a:s>DateTimeText(</a:s>
                                    <a:s r="1372">
                                       <a:s r="1368">
                                          <a:s>(</a:s>
                                          <a:s r="1368">
                                             <a:s r="1370">
                                                <a:s r="1369">
                                                   <a:s>E</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1370">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="1371">
                                                <a:s>FHIR.Period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1372">
                                          <a:s>&quot;end&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1385">
                              <a:s r="1378">
                                 <a:s>'Encounter/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1380">
                                 <a:s r="1379">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1380">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1386" locator="253:3-261:3" xsi:type="Query">
            <source localId="1335" locator="253:3-253:25" alias="E">
               <expression localId="1340" locator="253:3-253:23" name="PertinentEncounters" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1341" locator="254:3-261:3">
               <expression localId="1342" locator="254:10-261:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1351" locator="255:11-255:45" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1344" locator="255:30-255:44" xsi:type="Indexer">
                           <signature localId="1348" xsi:type="ListTypeSpecifier">
                              <elementType localId="1349" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="1350" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1346" locator="255:30-255:41" path="reasonCode" scope="E" xsi:type="Property"/>
                           <operand localId="1347" locator="255:43" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1353" locator="256:12-256:19" path="status" scope="E" xsi:type="Property"/>
                  </element>
                  <element name="date">
                     <value localId="1376" locator="257:11-259:58" xsi:type="Concatenate">
                        <operand localId="1366" locator="257:11-258:12" xsi:type="Concatenate">
                           <operand localId="1362" locator="257:11-257:64" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                              <operand localId="1361" locator="257:31-257:63" path="start" xsi:type="Property">
                                 <source localId="1357" locator="257:31-257:55" strict="false" xsi:type="As">
                                    <operand localId="1359" locator="257:32-257:39" path="period" scope="E" xsi:type="Property"/>
                                    <asTypeSpecifier localId="1360" locator="257:44-257:54" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand localId="1363" locator="258:7-258:12" valueType="t:String" value=" to " xsi:type="Literal"/>
                        </operand>
                        <operand localId="1373" locator="259:7-259:58" name="DateTimeText" libraryName="Common" xsi:type="FunctionRef">
                           <operand localId="1372" locator="259:27-259:57" path="end" xsi:type="Property">
                              <source localId="1368" locator="259:27-259:51" strict="false" xsi:type="As">
                                 <operand localId="1370" locator="259:28-259:35" path="period" scope="E" xsi:type="Property"/>
                                 <asTypeSpecifier localId="1371" locator="259:40-259:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                              </source>
                           </operand>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1385" locator="260:16-260:34" xsi:type="Concatenate">
                        <operand localId="1378" locator="260:16-260:27" valueType="t:String" value="Encounter/" xsi:type="Literal"/>
                        <operand localId="1381" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1382" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1380" locator="260:31-260:34" path="id" scope="E" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1392" locator="266:3-267:40" name="PertinentEpisodesOfCare" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1392">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT EPISODES OF CARE
//------------------------------------------------------------------------------
  define PertinentEpisodesOfCare:
    </a:s>
               <a:s r="1394">
                  <a:s r="1393">
                     <a:s>DataElements</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="1394">
                     <a:s>PregnancyEpisodesOfCare</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1394" locator="267:5-267:40" name="PregnancyEpisodesOfCare" libraryName="DataElements" xsi:type="ExpressionRef"/>
      </def>
      <def localId="1417" locator="344:1-348:29" name="displayStartDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1417">
               <a:s>define function displayStartDate(startDate String):
  </a:s>
               <a:s r="1724">
                  <a:s r="1724">
                     <a:s>if </a:s>
                     <a:s r="1727">
                        <a:s r="1725">
                           <a:s>startDate</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="1728">
                        <a:s>startDate</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="1729">
                        <a:s>'no start date available'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1724" locator="345:3-348:29" xsi:type="If">
            <condition localId="1727" locator="345:6-345:26" xsi:type="Not">
               <operand localId="1726" locator="345:6-345:26" xsi:type="IsNull">
                  <operand localId="1725" locator="345:6-345:14" name="startDate" xsi:type="OperandRef"/>
               </operand>
            </condition>
            <then localId="1728" locator="346:5-346:13" name="startDate" xsi:type="OperandRef"/>
            <else localId="1729" locator="348:5-348:29" valueType="t:String" value="no start date available" xsi:type="Literal"/>
         </expression>
         <operand localId="1419" name="startDate">
            <operandTypeSpecifier localId="1418" locator="344:44-344:49" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1436" locator="350:1-354:27" name="displayEndDate" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1436">
               <a:s>define function displayEndDate(endDate String):
  </a:s>
               <a:s r="1730">
                  <a:s r="1730">
                     <a:s>if </a:s>
                     <a:s r="1733">
                        <a:s r="1731">
                           <a:s>endDate</a:s>
                        </a:s>
                        <a:s> is not null</a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="1734">
                        <a:s>endDate</a:s>
                     </a:s>
                     <a:s>
  else
    </a:s>
                     <a:s r="1735">
                        <a:s>'no end date available'</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1730" locator="351:3-354:27" xsi:type="If">
            <condition localId="1733" locator="351:6-351:24" xsi:type="Not">
               <operand localId="1732" locator="351:6-351:24" xsi:type="IsNull">
                  <operand localId="1731" locator="351:6-351:12" name="endDate" xsi:type="OperandRef"/>
               </operand>
            </condition>
            <then localId="1734" locator="352:5-352:11" name="endDate" xsi:type="OperandRef"/>
            <else localId="1735" locator="354:5-354:27" valueType="t:String" value="no end date available" xsi:type="Literal"/>
         </expression>
         <operand localId="1438" name="endDate">
            <operandTypeSpecifier localId="1437" locator="350:40-350:45" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1389" locator="269:1-281:31" name="PertinentEpisodesOfCareSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1389">
               <a:s>define PertinentEpisodesOfCareSummary:
  </a:s>
               <a:s r="1470">
                  <a:s>
                     <a:s r="1390">
                        <a:s r="1395">
                           <a:s>(</a:s>
                           <a:s r="1395">
                              <a:s>PertinentEpisodesOfCare</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> E</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1396">
                     <a:s>return </a:s>
                     <a:s r="1397">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1406">
                              <a:s r="1398">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1406">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1399">
                                    <a:s r="1401">
                                       <a:s r="1400">
                                          <a:s>E</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1401">
                                          <a:s>type</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1402">[0]</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>value: </a:s>
                           <a:s r="1409">
                              <a:s r="1408">
                                 <a:s r="1407">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1408">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1409">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>date:
      </a:s>
                           <a:s r="1448">
                              <a:s r="1430">
                                 <a:s r="1420">
                                    <a:s>displayStartDate(</a:s>
                                    <a:s r="1416">
                                       <a:s r="1415">
                                          <a:s r="1412">
                                             <a:s>Common</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1415">
                                             <a:s>PeriodObject(</a:s>
                                             <a:s r="1414">
                                                <a:s r="1413">
                                                   <a:s>E</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1414">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1416">
                                          <a:s>&quot;Start&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s> +
      </a:s>
                                 <a:s r="1427">
                                    <a:s>' to '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> +
      </a:s>
                              <a:s r="1439">
                                 <a:s>displayEndDate(</a:s>
                                 <a:s r="1435">
                                    <a:s r="1434">
                                       <a:s r="1431">
                                          <a:s>Common</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1434">
                                          <a:s>PeriodObject(</a:s>
                                          <a:s r="1433">
                                             <a:s r="1432">
                                                <a:s>E</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1433">
                                                <a:s>period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1435">
                                       <a:s>&quot;End&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>reference: </a:s>
                           <a:s r="1457">
                              <a:s r="1450">
                                 <a:s>'EpisodeOfCare/'</a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="1452">
                                 <a:s r="1451">
                                    <a:s>E</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1452">
                                    <a:s>id</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>edited: </a:s>
                           <a:s r="1459">
                              <a:s>HasBeenLocallyEdited(</a:s>
                              <a:s r="1458">
                                 <a:s>E</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="1464">
                     <a:s>sort by </a:s>
                     <a:s r="1463">
                        <a:s r="1460">
                           <a:s>(</a:s>
                           <a:s r="1460">
                              <a:s r="1461">
                                 <a:s>date</a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1462">
                                 <a:s>String</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> desc</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1470" locator="270:3-281:31" xsi:type="Query">
            <source localId="1390" locator="270:3-270:29" alias="E">
               <expression localId="1395" locator="270:3-270:27" name="PertinentEpisodesOfCare" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1396" locator="271:3-280:3">
               <expression localId="1397" locator="271:10-280:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1406" locator="272:11-272:39" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1399" locator="272:30-272:38" xsi:type="Indexer">
                           <signature localId="1403" xsi:type="ListTypeSpecifier">
                              <elementType localId="1404" name="fhir:CodeableConcept" xsi:type="NamedTypeSpecifier"/>
                           </signature>
                           <signature localId="1405" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1401" locator="272:30-272:35" path="type" scope="E" xsi:type="Property"/>
                           <operand localId="1402" locator="272:37" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </value>
                  </element>
                  <element name="value">
                     <value localId="1409" locator="273:12-273:25" path="value" xsi:type="Property">
                        <source localId="1408" locator="273:12-273:19" path="status" scope="E" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="date">
                     <value localId="1448" locator="275:7-277:57" xsi:type="Concatenate">
                        <operand localId="1430" locator="275:7-276:12" xsi:type="Concatenate">
                           <operand localId="1420" locator="275:7-275:61" name="displayStartDate" xsi:type="FunctionRef">
                              <operand localId="1416" locator="275:24-275:60" path="Start" xsi:type="Property">
                                 <source localId="1415" locator="275:24-275:52" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                                    <operand localId="1414" locator="275:44-275:51" path="period" scope="E" xsi:type="Property"/>
                                 </source>
                              </operand>
                           </operand>
                           <operand localId="1427" locator="276:7-276:12" valueType="t:String" value=" to " xsi:type="Literal"/>
                        </operand>
                        <operand localId="1439" locator="277:7-277:57" name="displayEndDate" xsi:type="FunctionRef">
                           <operand localId="1435" locator="277:22-277:56" path="End" xsi:type="Property">
                              <source localId="1434" locator="277:22-277:50" name="PeriodObject" libraryName="Common" xsi:type="FunctionRef">
                                 <operand localId="1433" locator="277:42-277:49" path="period" scope="E" xsi:type="Property"/>
                              </source>
                           </operand>
                        </operand>
                     </value>
                  </element>
                  <element name="reference">
                     <value localId="1457" locator="278:16-278:38" xsi:type="Concatenate">
                        <operand localId="1450" locator="278:16-278:31" valueType="t:String" value="EpisodeOfCare/" xsi:type="Literal"/>
                        <operand localId="1453" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <signature localId="1454" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="1452" locator="278:35-278:38" path="id" scope="E" xsi:type="Property"/>
                        </operand>
                     </value>
                  </element>
                  <element name="edited">
                     <value localId="1459" locator="279:13-279:35" name="HasBeenLocallyEdited" xsi:type="FunctionRef">
                        <operand localId="1458" locator="279:34" name="E" xsi:type="AliasRef"/>
                     </value>
                  </element>
               </expression>
            </return>
            <sort localId="1464" locator="281:3-281:31">
               <by localId="1463" locator="281:11-281:31" direction="desc" xsi:type="ByExpression">
                  <expression localId="1460" locator="281:11-281:26" strict="false" xsi:type="As">
                     <operand localId="1461" locator="281:12-281:15" name="date" xsi:type="IdentifierRef"/>
                     <asTypeSpecifier localId="1462" locator="281:20-281:25" name="t:String" xsi:type="NamedTypeSpecifier"/>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="1475" locator="288:1-297:3" name="DueOrOverdueScreeningSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1475">
               <a:s>//------------------------------------------------------------------------------
// PERTINENT REQUESTS
//------------------------------------------------------------------------------  

define DueOrOverdueScreeningSummary:
  </a:s>
               <a:s r="1494">
                  <a:s>
                     <a:s r="1476">
                        <a:s r="1478">
                           <a:s>(</a:s>
                           <a:s r="1478">
                              <a:s r="1477">
                                 <a:s>ScreeningDue</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1478">
                                 <a:s>DueOrOverdue</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1479">
                     <a:s>return
  </a:s>
                     <a:s r="1480">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1484">
                              <a:s r="1481">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1484">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1483">
                                    <a:s r="1482">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1483">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>intent: </a:s>
                           <a:s r="1486">
                              <a:s r="1485">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1486">
                                 <a:s>intent</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, 
    </a:s>
                        <a:s>
                           <a:s>occurrence: </a:s>
                           <a:s r="1488">
                              <a:s r="1487">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1488">
                                 <a:s>nextDue</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>flag: </a:s>
                           <a:s r="1491">
                              <a:s r="1490">
                                 <a:s r="1489">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1490">
                                    <a:s>flag</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1491">
                                 <a:s>display</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>plannedRepeat: </a:s>
                           <a:s r="1493">
                              <a:s r="1492">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1493">
                                 <a:s>plannedRepeat</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1494" locator="289:3-297:3" xsi:type="Query">
            <source localId="1476" locator="289:3-289:31" alias="R">
               <expression localId="1478" locator="289:3-289:29" name="DueOrOverdue" libraryName="ScreeningDue" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1479" locator="290:5-297:3">
               <expression localId="1480" locator="291:3-297:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1484" locator="292:11-292:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1483" locator="292:30-292:35" path="code" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="intent">
                     <value localId="1486" locator="293:13-293:20" path="intent" scope="R" xsi:type="Property"/>
                  </element>
                  <element name="occurrence">
                     <value localId="1488" locator="294:17-294:25" path="nextDue" scope="R" xsi:type="Property"/>
                  </element>
                  <element name="flag">
                     <value localId="1491" locator="295:11-295:24" path="display" xsi:type="Property">
                        <source localId="1490" locator="295:11-295:16" path="flag" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="plannedRepeat">
                     <value localId="1493" locator="296:20-296:34" path="plannedRepeat" scope="R" xsi:type="Property"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1497" locator="299:1-308:3" name="IncompleteScreeningOrdersSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1497">
               <a:s>define IncompleteScreeningOrdersSummary:
  </a:s>
               <a:s r="1515">
                  <a:s>
                     <a:s r="1498">
                        <a:s r="1500">
                           <a:s>(</a:s>
                           <a:s r="1500">
                              <a:s r="1499">
                                 <a:s>ScreeningIncomplete</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1500">
                                 <a:s>IncompleteScreeningOrders</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> R</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="1501">
                     <a:s>return
  </a:s>
                     <a:s r="1502">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="1506">
                              <a:s r="1503">
                                 <a:s>Common</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1506">
                                 <a:s>ConceptText(</a:s>
                                 <a:s r="1505">
                                    <a:s r="1504">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1505">
                                       <a:s>code</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>intent: </a:s>
                           <a:s r="1508">
                              <a:s r="1507">
                                 <a:s>R</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1508">
                                 <a:s>intent</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, 
    </a:s>
                        <a:s>
                           <a:s>occurence: </a:s>
                           <a:s r="1509">
                              <a:s r="1511">
                                 <a:s r="1510">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1511">
                                    <a:s>occurrence</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="1512">
                                 <a:s>FHIR.dateTime</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s r="1513">flag: null</a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s r="1514">plannedRepeat: null</a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1515" locator="300:3-308:3" xsi:type="Query">
            <source localId="1498" locator="300:3-300:51" alias="R">
               <expression localId="1500" locator="300:3-300:49" name="IncompleteScreeningOrders" libraryName="ScreeningIncomplete" xsi:type="ExpressionRef"/>
            </source>
            <return localId="1501" locator="301:5-308:3">
               <expression localId="1502" locator="302:3-308:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="1506" locator="303:11-303:36" name="ConceptText" libraryName="Common" xsi:type="FunctionRef">
                        <operand localId="1505" locator="303:30-303:35" path="code" scope="R" xsi:type="Property"/>
                     </value>
                  </element>
                  <element name="intent">
                     <value localId="1508" locator="304:13-304:20" path="intent" scope="R" xsi:type="Property"/>
                  </element>
                  <element name="occurence">
                     <value localId="1509" locator="305:16-305:44" strict="false" xsi:type="As">
                        <operand localId="1511" locator="305:16-305:27" path="occurrence" scope="R" xsi:type="Property"/>
                        <asTypeSpecifier localId="1512" locator="305:32-305:44" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </value>
                  </element>
                  <element name="flag">
                     <value localId="1513" locator="306:11-306:14" xsi:type="Null"/>
                  </element>
                  <element name="plannedRepeat">
                     <value localId="1514" locator="307:20-307:23" xsi:type="Null"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="1473" locator="310:1-312:36" name="PertinentRequestsSummary" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1473">
               <a:s>define PertinentRequestsSummary:
  </a:s>
               <a:s r="1567">
                  <a:s r="1495">
                     <a:s>DueOrOverdueScreeningSummary</a:s>
                  </a:s>
                  <a:s> union
    </a:s>
                  <a:s r="1516">
                     <a:s>IncompleteScreeningOrdersSummary</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1567" locator="311:3-312:36" xsi:type="Union">
            <signature localId="1568" xsi:type="ListTypeSpecifier">
               <elementType localId="1569" xsi:type="ChoiceTypeSpecifier">
                  <choice localId="1570" xsi:type="TupleTypeSpecifier">
                     <element localId="1571" name="name">
                        <elementType localId="1572" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1573" name="intent">
                        <elementType localId="1574" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1575" name="occurence">
                        <elementType localId="1576" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1577" name="flag">
                        <elementType localId="1578" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1579" name="plannedRepeat">
                        <elementType localId="1580" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </choice>
                  <choice localId="1581" xsi:type="TupleTypeSpecifier">
                     <element localId="1582" name="name">
                        <elementType localId="1583" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1584" name="intent">
                        <elementType localId="1585" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1586" name="occurrence">
                        <elementType localId="1587" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1588" name="flag">
                        <elementType localId="1589" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1590" name="plannedRepeat">
                        <elementType localId="1591" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </choice>
               </elementType>
            </signature>
            <signature localId="1592" xsi:type="ListTypeSpecifier">
               <elementType localId="1593" xsi:type="ChoiceTypeSpecifier">
                  <choice localId="1594" xsi:type="TupleTypeSpecifier">
                     <element localId="1595" name="name">
                        <elementType localId="1596" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1597" name="intent">
                        <elementType localId="1598" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1599" name="occurence">
                        <elementType localId="1600" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1601" name="flag">
                        <elementType localId="1602" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1603" name="plannedRepeat">
                        <elementType localId="1604" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </choice>
                  <choice localId="1605" xsi:type="TupleTypeSpecifier">
                     <element localId="1606" name="name">
                        <elementType localId="1607" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1608" name="intent">
                        <elementType localId="1609" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1610" name="occurrence">
                        <elementType localId="1611" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1612" name="flag">
                        <elementType localId="1613" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                     <element localId="1614" name="plannedRepeat">
                        <elementType localId="1615" name="t:String" xsi:type="NamedTypeSpecifier"/>
                     </element>
                  </choice>
               </elementType>
            </signature>
            <operand localId="1517" xsi:type="As">
               <operand localId="1495" locator="311:3-311:30" name="DueOrOverdueScreeningSummary" xsi:type="ExpressionRef"/>
               <asTypeSpecifier localId="1518" xsi:type="ListTypeSpecifier">
                  <elementType localId="1519" xsi:type="ChoiceTypeSpecifier">
                     <choice localId="1520" xsi:type="TupleTypeSpecifier">
                        <element localId="1521" name="name">
                           <elementType localId="1522" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1523" name="intent">
                           <elementType localId="1524" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1525" name="occurence">
                           <elementType localId="1526" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1527" name="flag">
                           <elementType localId="1528" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1529" name="plannedRepeat">
                           <elementType localId="1530" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </choice>
                     <choice localId="1531" xsi:type="TupleTypeSpecifier">
                        <element localId="1532" name="name">
                           <elementType localId="1533" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1534" name="intent">
                           <elementType localId="1535" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1536" name="occurrence">
                           <elementType localId="1537" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1538" name="flag">
                           <elementType localId="1539" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1540" name="plannedRepeat">
                           <elementType localId="1541" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </choice>
                  </elementType>
               </asTypeSpecifier>
            </operand>
            <operand localId="1542" xsi:type="As">
               <operand localId="1516" locator="312:5-312:36" name="IncompleteScreeningOrdersSummary" xsi:type="ExpressionRef"/>
               <asTypeSpecifier localId="1543" xsi:type="ListTypeSpecifier">
                  <elementType localId="1544" xsi:type="ChoiceTypeSpecifier">
                     <choice localId="1545" xsi:type="TupleTypeSpecifier">
                        <element localId="1546" name="name">
                           <elementType localId="1547" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1548" name="intent">
                           <elementType localId="1549" name="fhir:ServiceRequestIntent" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1550" name="occurence">
                           <elementType localId="1551" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1552" name="flag">
                           <elementType localId="1553" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1554" name="plannedRepeat">
                           <elementType localId="1555" name="t:Any" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </choice>
                     <choice localId="1556" xsi:type="TupleTypeSpecifier">
                        <element localId="1557" name="name">
                           <elementType localId="1558" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1559" name="intent">
                           <elementType localId="1560" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1561" name="occurrence">
                           <elementType localId="1562" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1563" name="flag">
                           <elementType localId="1564" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                        <element localId="1565" name="plannedRepeat">
                           <elementType localId="1566" name="t:String" xsi:type="NamedTypeSpecifier"/>
                        </element>
                     </choice>
                  </elementType>
               </asTypeSpecifier>
            </operand>
         </expression>
      </def>
      <def localId="219" locator="15:1-38:1" name="PertinentHistory" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="219">
               <a:s>define PertinentHistory:
</a:s>
               <a:s r="220">
                  <a:s>{
  </a:s>
                  <a:s>
                     <a:s>patientInfo: </a:s>
                     <a:s r="221">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>name: </a:s>
                           <a:s r="317">
                              <a:s>PatientName</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>id: </a:s>
                           <a:s r="319">
                              <a:s r="318">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="319">
                                 <a:s>identifier</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>isPregnant: </a:s>
                           <a:s r="321">
                              <a:s r="320">
                                 <a:s>DataElements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="321">
                                 <a:s>Pregnant</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>dateOfBirth: </a:s>
                           <a:s r="323">
                              <a:s r="322">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="323">
                                 <a:s>birthDate</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>sexAtBirth: </a:s>
                           <a:s r="343">
                              <a:s>BirthSexText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>age: </a:s>
                           <a:s r="348">
                              <a:s>AgeInYears()</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>gender: </a:s>
                           <a:s r="381">
                              <a:s>GenderText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>primaryLanguage: </a:s>
                           <a:s r="524">
                              <a:s>LanguageText</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>race: </a:s>
                           <a:s r="643">
                              <a:s r="585">
                                 <a:s r="581">
                                    <a:s>RaceText</a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="582">
                                    <a:s>'; '</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="640">
                                 <a:s>EthnicityText</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>,
  </a:s>
                  <a:s>
                     <a:s>patientHistory: </a:s>
                     <a:s r="644">
                        <a:s>{
    </a:s>
                        <a:s>
                           <a:s>conditions: </a:s>
                           <a:s r="768">
                              <a:s>PertinentConditionsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>familyMemberHistory: </a:s>
                           <a:s r="969">
                              <a:s>PertinentFamilyMemberHistorySummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>observations: </a:s>
                           <a:s r="1029">
                              <a:s>PertinentObservationsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>procedures: </a:s>
                           <a:s r="1070">
                              <a:s>PertinentProceduresSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>diagnosticReports: </a:s>
                           <a:s r="1332">
                              <a:s>DiagnosticReportsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>encounters: </a:s>
                           <a:s r="1387">
                              <a:s>PertinentEncountersSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>episodeOfCares: </a:s>
                           <a:s r="1471">
                              <a:s>PertinentEpisodesOfCareSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s>
                           <a:s>requests: </a:s>
                           <a:s r="1616">
                              <a:s>PertinentRequestsSummary</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  }</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
}</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="220" locator="16:1-38:1" xsi:type="Tuple">
            <element name="patientInfo">
               <value localId="221" locator="17:16-27:3" xsi:type="Tuple">
                  <element name="name">
                     <value localId="317" locator="18:11-18:21" name="PatientName" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="id">
                     <value localId="319" locator="19:9-19:26" path="identifier" xsi:type="Property">
                        <source localId="318" locator="19:9-19:15" name="Patient" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
                  <element name="isPregnant">
                     <value localId="321" locator="20:17-20:37" name="Pregnant" libraryName="DataElements" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="dateOfBirth">
                     <value localId="323" locator="21:18-21:34" path="birthDate" xsi:type="Property">
                        <source localId="322" locator="21:18-21:24" name="Patient" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
                  <element name="sexAtBirth">
                     <value localId="343" locator="22:17-22:28" name="BirthSexText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="age">
                     <value localId="348" locator="23:10-23:21" precision="Year" xsi:type="CalculateAge">
                        <signature localId="349" name="t:Date" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="347" path="birthDate.value" xsi:type="Property">
                           <source localId="346" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                     </value>
                  </element>
                  <element name="gender">
                     <value localId="381" locator="24:13-24:22" name="GenderText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="primaryLanguage">
                     <value localId="524" locator="25:22-25:33" name="LanguageText" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="race">
                     <value localId="643" locator="26:11-26:41" xsi:type="Concatenate">
                        <operand localId="585" locator="26:11-26:25" xsi:type="Concatenate">
                           <operand localId="581" locator="26:11-26:18" name="RaceText" xsi:type="ExpressionRef"/>
                           <operand localId="582" locator="26:22-26:25" valueType="t:String" value="; " xsi:type="Literal"/>
                        </operand>
                        <operand localId="640" locator="26:29-26:41" name="EthnicityText" xsi:type="ExpressionRef"/>
                     </value>
                  </element>
               </value>
            </element>
            <element name="patientHistory">
               <value localId="644" locator="28:19-37:3" xsi:type="Tuple">
                  <element name="conditions">
                     <value localId="768" locator="29:17-29:42" name="PertinentConditionsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="familyMemberHistory">
                     <value localId="969" locator="30:26-30:60" name="PertinentFamilyMemberHistorySummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="observations">
                     <value localId="1029" locator="31:19-31:46" name="PertinentObservationsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="procedures">
                     <value localId="1070" locator="32:17-32:42" name="PertinentProceduresSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="diagnosticReports">
                     <value localId="1332" locator="33:24-33:47" name="DiagnosticReportsSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="encounters">
                     <value localId="1387" locator="34:17-34:42" name="PertinentEncountersSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="episodeOfCares">
                     <value localId="1471" locator="35:21-35:50" name="PertinentEpisodesOfCareSummary" xsi:type="ExpressionRef"/>
                  </element>
                  <element name="requests">
                     <value localId="1616" locator="36:15-36:38" name="PertinentRequestsSummary" xsi:type="ExpressionRef"/>
                  </element>
               </value>
            </element>
         </expression>
      </def>
   </statements>
</library>
